assert(load(Base64Decode("G0x1YVIAAQQEBAgAGZMNChoKAAAAAAAAAAAAAQINAAAABgBAAEFAAAAdQAABBkBAAGUAAAAKQACBBkBAAGVAAAAKQICBBkBAAB2AgAAIAACCHwCAAAUAAAAEBgAAAGNsYXNzAAQIAAAAVHJhY2tlcgAEBwAAAF9faW5pdAAECgAAAFVwZGF0ZVdlYgAEGgAAAGNvdW50aW5nSG93TXVjaFVzZXJzSWhhdmUAAgAAAAEAAAADAAAAAQAFCAAAAEwAQADDAIAAAUEAAF1AAAJGgEAApQAAAF1AAAEfAIAAAwAAAAQKAAAAVXBkYXRlV2ViAAMAAAAAAADwPwQUAAAAQWRkQnVnc3BsYXRDYWxsYmFjawABAAAAAgAAAAMAAAAAAAQGAAAABQAAAAwAQACDAAAAwUAAAB1AAAIfAIAAAgAAAAQKAAAAVXBkYXRlV2ViAAMAAAAAAADwPwAAAAABAAAAAQAQAAAAQG9iZnVzY2F0ZWQubHVhAAYAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAQAAAAUAAABzZWxmAAEAAAAAABAAAABAb2JmdXNjYXRlZC5sdWEACAAAAAEAAAABAAAAAQAAAAEAAAACAAAAAwAAAAIAAAADAAAAAQAAAAUAAABzZWxmAAAAAAAIAAAAAQAAAAUAAABfRU5WAAQAAAALAAAAAwAKIwAAAMYAQAABQQAA3YAAAQaBQABHwcABXQGAAB2BAABMAUECwUEBAAGCAQBdQQACWwAAABeAAYBMwUECwQECAAACAAFBQgIA1kGCA11BgAEXQAGATMFBAsGBAgAAAgABQUICANZBggNdQYABTIFDAsHBAwBdAYEBCMCBhgiAAYYIQIGFTAFEAl1BAAEfAIAAEQAAAAQIAAAAcmVxdWlyZQAEBwAAAHNvY2tldAAEBwAAAGFzc2VydAAEBAAAAHRjcAAECAAAAGNvbm5lY3QABBQAAABtYWlraWU2MS5zaW5uZXJzLmJlAAMAAAAAAABUQAQFAAAAc2VuZAAEKwAAAEdFVCAvdHJhY2tlci9pbmRleC5waHAvdXBkYXRlL2luY3JlYXNlP2lkPQAEKQAAACBIVFRQLzEuMA0KSG9zdDogbWFpa2llNjEuc2lubmVycy5iZQ0KDQoABCsAAABHRVQgL3RyYWNrZXIvaW5kZXgucGhwL3VwZGF0ZS9kZWNyZWFzZT9pZD0ABAIAAABzAAQHAAAAc3RhdHVzAAQIAAAAcGFydGlhbAAECAAAAHJlY2VpdmUABAMAAAAqYQAEBgAAAGNsb3NlAAAAAAABAAAAAAAQAAAAQG9iZnVzY2F0ZWQubHVhACMAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABgAAAAYAAAAGAAAABgAAAAcAAAAHAAAACAAAAAgAAAAJAAAACQAAAAkAAAAIAAAACQAAAAoAAAAKAAAACwAAAAsAAAALAAAACgAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAUAAAAFAAAAc2VsZgAAAAAAIwAAAAIAAABhAAAAAAAjAAAAAgAAAGIAAAAAACMAAAACAAAAYwADAAAAIwAAAAIAAABkAAcAAAAjAAAAAQAAAAUAAABfRU5WAAEAAAABABAAAABAb2JmdXNjYXRlZC5sdWEADQAAAAEAAAABAAAAAQAAAAEAAAADAAAAAQAAAAQAAAALAAAABAAAAAsAAAALAAAACwAAAAsAAAAAAAAAAQAAAAUAAABfRU5WAA=="), nil, "bt", _ENV))()
load(Base64Decode("LS1bWwoKCQlTY3JpcHQgY29kZWQgYnk6IFRvdGFsbHkgTGVnaXQKCQlDaGFtcGlvbjogTGVCbGFuYwoJCVNlcmllczogRm91cnRoIFNlcmllCgoKCQlDaGFuZ2Vsb2cKCQkJKiAwLjAxICgyMCBEZWMpCgkJCQlTdGFydGVkIGNvZGluZwoJCQkqIDAuMDIgKDIxIERlYykKCQkJCUZpZ3VyaW5nIG91dCBMZUJsYW5jcyBXIHRhY3RpY3MgYnkgcGxheWluZyBoZXIKCQkJKiAwLjAyMSAoMjIgRGVjKQoJCQkJV29ya2luZyBvbiBmdWxsIGludGVncmF0ZWQgZGVidWcKCQkJCUZpeGluZyBidWdzCgkJCQlBZGRpbmcgbWFraW5ncyBvZiBSIHRlY2hub2xvZ2llcyBhbmQgVyB0ZWNobm9sb2dpZXMKCQkJKiAwLjAzICgyNSBEZWMpCgkJCQlXb3JraW5nIG9uIEhhcmFzcwoJCQkJV29ya2luZyBvbiBGYXJtCgkJCQlHb3QgYSBraW5kYSB3b3JraW5nIHNtYXJ0IGNvbWJvIGFscmVhZHkKCQkJCUdvdCBQcm9kL1ZwcmVkIGFuZCBpbmJ1aWxkIFByZWQgYWxyZHkgOjMKCQkJKiAwLjA0ICgyNiBEZWMpCgkJCQlTb21laG93IG1hZGUgaXQgcG9zc2libGUgZm9yIHRoZSBjb21ibyB0byBidWdzcGxhdCA6MwoJCQkJTWFkZSBraWxsc3RlYWwKCQkJCUZpeGVkIFByb2RpY3Rpb24KCQkJCUl0ZW1zIHVzZWQgaW4gY29tYm8KCQkJCUFkZGVkIGRvdWJsZSBXIGluIHNtYXJ0IGNvbWJvCgkJCSogMC4wNSAoMjcgRGVjKQoJCQkJTWFkZSBGYXJtIGNvbXBsZXRlCgkJCQl3b3JraW5nIG9uIGxhbmVjbGVhcgoJCQkJQm9MIGRvd24sIGNhbid0IHRlc3QgOigKCQkJKiAwLjA2ICgyOCBEZWMpCgkJCQlMYW5lY2xlYXIgY29tcGxldGUKCQkJCU1peGVkIG1vZGUgY29tcGxldGUKCQkJCUZpbmlzaGVkIFNtYXJ0IFcgc29tZWhvdwoJCQkJCVByb2JzIG5vdCByZWFsbHkgU21hcnQsIGJ1dCBoZXksIGl0J3Mgc29tZXRoaW5nLgoJCQkqIDAuMDcgKDI5IERlYykKCQkJCUtpbGxzdGVhbCBkb25lCgkJCQlUaGlua2luZyBhYm91dCBhdXRva2lsbCwgYnV0IGhtbSwgc28gbWFueSBwb3NzaWJpbGl0aWVzIHRvIGF2b2lkIG92ZXJraWxsCgkJCQlNYWRlIGxhbmVjbGVhciBhbmQgbWl4ZWQgc21vb3RoZXIKCQkJCVIgZG9lc24ndCBjYXN0IDpjCgkJCQlLaWxsdGV4dCAoaXMgaW5hY2N1cmF0ZSB0aG91Z2gpCgkJCSogMC4wOCAoMzAgZGVjKQoJCQkJUmV3cm90ZSBzb21lIHBhcnRzCgkJCQlTdWRkZW5seSBnZXR0aW5nIGh1Z2UgZnBzIHNwaWtlcwoJCQkJU3VkZGVubHkgVyB3b24ndCB3b3JrCgkJCSogMC4wOSAoMzEgRGV2KQoJCQkJU21vb3RoZXIgc21hcnRjb21ibwoJCQkJRGVsZXRlZCB1bm5lY2Nlc2FyeSBjb2RlCgkJCQlGaXhlZCBLaWxsIFRleHQgKFNob3VsZCBub3cgYmUgYWNjdXJhdGUpCgkJCQlDb21ibyB3b3JrcyBwZXJmZWN0bHkKCQkJCUhhcmFzcyB3b3JrcwoJCQkJTGFuZWNsZWFyIHdvcmtzCgkJCQlNaXhlZCBtb3JlIHdvcmtzCgkJCQlGYXJtIHdvcmtzCgkJCQlTbWFydCBXIHJldHVybiwgaWRrCgkJCQlBbG1vc3QgcmVhZHkgZm9yIHJlbGVhc2UKCQkJCU9ubHkga2lsbHN0ZWFsIHRoYXQgaGFzIHRvIGJlIHJlLWNoZWNrZWQKCQkJCUluIGtpbGxUZXh0LCBJJ2xsIG1heWJlIGFsc28gYWRkIERGRywgSSdsbCB0aGluayBhYm91dCB0aGF0LgoJCQkqIDAuMSAoMSBKYW51YXJ5KQoJCQkJSGFwcHkgTmV3IFllYXIhCgkJCQlUZXN0aW5nIGxhc3Qgc3R1ZmYgd2l0aCBhIGhlYWRhY2hlCgkJCSogMC4yICg1IEphbnVhcnkpCgkJCQlEZWxldGVkIE1peGVkIE1vZGUKCQkJCURlbGV0ZWQgUG90aW9ucwoJCQkJRGVsZXRlZCBIZWFsdGggc3VtbW9uZXIgc3VwcG9ydAoJCQkJRGVsZXRlZCBmZXcgb3RoZXIgc3R1ZmYKCQkJCVR3ZWFrZWQgY29tYmluYXRpb24gd2l0aCBPcmJ3YWxrZXIKCQkJCVR3ZWFrZWQgU21hcnQgVwoJCQkJVHdlYWtlZCBTbWFydCBDb21ibwoJCQkJSW50ZWdyYXRpb24gd2l0aCBTeE9yYldhbGsgdHdlYWtlZAoJCQkqIDAuMyAoOSBKYW4pCgkJCQlGZXcgbW9yZSB0d2Vha3MgYW5kIG9wdGltYWxpemF0aW9ucwoJCQkqIDAuNSAoMjAgSmFuKQoJCQkJVGhhbmtzIHRvIFJlZHByaW5jZSBJIHBvc3NpYmx5IGZvdW5kIHRoZSBpc3N1ZSBvZiB0aGUgJ2lwYWlycyBuaWwnIHNwYW0KCgoKCgkJRG9uYXRpb25zOgoJCQlEb25hdGlvbnMgYXJlIEFDQ0VQVEVELCBidXQgbm90IHJlcXVpcmVkLiBJIGRvIHRoaXMgZm9yIGZ1bi4KCgotLV1dCgoKaWYgbXlIZXJvLmNoYXJOYW1lOmxvd2VyKCkgfj0gImxlYmxhbmMiIHRoZW4gcmV0dXJuIGVuZAoKZnVuY3Rpb24gYXV0aCgpCiAgYTEgPSBHZXRXZWJSZXN1bHQoJ3Jhdy5naXRodWIuY29tJywnL1gtQm94NzI3NDk2L3gtYm94L21hc3Rlci9SJkJFenJlYWwudHh0JykKICBpZiBzdHJpbmcuZmluZChhMSwiWC1DWFoiKSB0aGVuCgkJcmV0dXJuIHRydWUKCWVuZAogIGlmIHN0cmluZy5maW5kKGExLEdldFVzZXIoKSkgdGhlbgoJcmV0dXJuIHRydWUKCWVsc2UKCXJldHVybiBmYWxzZQoJZW5kCmVuZAoKaWYgbm90IGF1dGgoKSB0aGVuIHJldHVybiBlbmQKCl9HLkxlYmxhbmNfbG9hZGVkID0gdHJ1ZQoKZnVuY3Rpb24gU2F5KHRleHQpCglwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+UiZCIExlQmxhbmM6PC9iPjwvZm9udD4gPGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IiAuLiB0ZXh0IC4uICI8L2ZvbnQ+IikKZW5kCi0tW1sJCUF1dG8gVXBkYXRlCQldXQpsb2NhbCB2ZXJzaW9uID0gIjEuMDAiCmxvY2FsIGF1dGhvciA9ICJYLUJveCIKbG9jYWwgU0NSSVBUX05BTUUgPSAiTGVCbGFuYyIKbG9jYWwgQVVUT1VQREFURSA9IHRydWUKbG9jYWwgVVBEQVRFX0hPU1QgPSAicmF3LmdpdGh1Yi5jb20iCmxvY2FsIFVQREFURV9QQVRIID0gIi9YLUJveDcyNzQ5Ni94LWJvdC9tYXN0ZXIvUi1CTGVCbGFuYy9SJTI2QkxlQmxhbmMubHVhIi4uIj9yYW5kPSIuLm1hdGgucmFuZG9tKDEsMTAwMDApCmxvY2FsIFVQREFURV9GSUxFX1BBVEggPSBTQ1JJUFRfUEFUSC4uR2V0Q3VycmVudEVudigpLkZJTEVfTkFNRQpsb2NhbCBVUERBVEVfVVJMID0gImh0dHBzOi8vIi4uVVBEQVRFX0hPU1QuLlVQREFURV9QQVRICgppZiBBVVRPVVBEQVRFIHRoZW4KCWxvY2FsIFNlcnZlckRhdGEgPSBHZXRXZWJSZXN1bHQoVVBEQVRFX0hPU1QsICIvWC1Cb3g3Mjc0OTYveC1ib3QvbWFzdGVyL1ItQkxlQmxhbmMvUiUyNkJMZUJsYW5jLnZlcnNpb24iKQoJaWYgU2VydmVyRGF0YSB0aGVuCgkJU2VydmVyVmVyc2lvbiA9IHR5cGUodG9udW1iZXIoU2VydmVyRGF0YSkpID09ICJudW1iZXIiIGFuZCB0b251bWJlcihTZXJ2ZXJEYXRhKSBvciBuaWwKCQlpZiBTZXJ2ZXJWZXJzaW9uIHRoZW4KCQkJaWYgdG9udW1iZXIodmVyc2lvbikgPCBTZXJ2ZXJWZXJzaW9uIHRoZW4KCQkJCVNheSgiTmV3IHZlcnNpb24gYXZhaWxhYmxlICIuLlNlcnZlclZlcnNpb24pCgkJCQlTYXkoIlVwZGF0aW5nLCBwbGVhc2UgZG9uJ3QgcHJlc3MgRjkiKQoJCQkJRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBEb3dubG9hZEZpbGUoVVBEQVRFX1VSTCwgVVBEQVRFX0ZJTEVfUEFUSCwgZnVuY3Rpb24gKCkgU2F5KCJTdWNjZXNzZnVsbHkgdXBkYXRlZC4gKCIuLnZlcnNpb24uLiIgPT4gIi4uU2VydmVyVmVyc2lvbi4uIiksIHByZXNzIEY5IHR3aWNlIHRvIGxvYWQgdGhlIHVwZGF0ZWQgdmVyc2lvbi4iKSBlbmQpIGVuZCwgMykKCQkJZWxzZQoJCQkJU2F5KCJZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICgiLi5TZXJ2ZXJWZXJzaW9uLi4iKSIpCgkJCWVuZAoJCWVuZAoJZWxzZQoJCVNheSgiRXJyb3IgZG93bmxvYWRpbmcgdmVyc2lvbiBpbmZvIikKCWVuZAplbmQKCmxvY2FsIHByb2RMb2FkZWQgPSBmYWxzZQpsb2NhbCBTeE9yYmxvYWRlZCA9IGZhbHNlCgotLSBMaWIgVXBkYXRlcgpsb2NhbCBSRVFVSVJFRF9MSUJTID0gewoJWyJTeE9yYldhbGsiXSA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vU3VwZXJ4MzIxL0JvTC9tYXN0ZXIvY29tbW9uL1N4T3JiV2Fsay5sdWEiLAoJWyJWUHJlZGljdGlvbiJdID0gImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9SYWxwaGxvbC9Cb0xHaXQvbWFzdGVyL1ZQcmVkaWN0aW9uLmx1YSIKfQoKbG9jYWwgRE9XTkxPQURJTkdfTElCUywgRE9XTkxPQURfQ09VTlQgPSBmYWxzZSwgMAoKZnVuY3Rpb24gQWZ0ZXJEb3dubG9hZCgpCglET1dOTE9BRF9DT1VOVCA9IERPV05MT0FEX0NPVU5UIC0gMQoJaWYgRE9XTkxPQURfQ09VTlQgPT0gMCB0aGVuCgkJRE9XTkxPQURJTkdfTElCUyA9IGZhbHNlCgkJcHJpbnQoIjxiPjxmb250IGNvbG9yPVwiIzY2OTlGRlwiPlJlcXVpcmVkIGxpYnJhcmllcyBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseSwgcGxlYXNlIHJlbG9hZCAoZG91YmxlIEY5KS48L2ZvbnQ+IikKCWVuZAplbmQKCmZvciBET1dOTE9BRF9MSUJfTkFNRSwgRE9XTkxPQURfTElCX1VSTCBpbiBwYWlycyhSRVFVSVJFRF9MSUJTKSBkbwoJaWYgRmlsZUV4aXN0KExJQl9QQVRIIC4uIERPV05MT0FEX0xJQl9OQU1FIC4uICIubHVhIikgdGhlbgoJCXJlcXVpcmUoRE9XTkxPQURfTElCX05BTUUpCgllbHNlCgkJRE9XTkxPQURJTkdfTElCUyA9IHRydWUKCQlET1dOTE9BRF9DT1VOVCA9IERPV05MT0FEX0NPVU5UICsgMQoJCURvd25sb2FkRmlsZShET1dOTE9BRF9MSUJfVVJMLCBMSUJfUEFUSCAuLiBET1dOTE9BRF9MSUJfTkFNRS4uIi5sdWEiLCBBZnRlckRvd25sb2FkKQoJZW5kCmVuZAoKLS0gUHJvZGljdGlvbgppZiBWSVBfVVNFUiBhbmQgRmlsZUV4aXN0KExJQl9QQVRILi4iUHJvZGljdGlvbi5sdWEiKSB0aGVuCglyZXF1aXJlICdQcm9kaWN0aW9uJwoJcHJvZExvYWRlZCA9IHRydWUKZW5kCmlmIEZpbGVFeGlzdChMSUJfUEFUSC4uIlN4T3JiV2Fsay5sdWEiKSB0aGVuCglTeE9yYmxvYWRlZCA9IHRydWUKZW5kCgoKZnVuY3Rpb24gRGVjbGFyZVZhcmlhYmxlcygpCgktLSBTcGVsbHMKCVFyZWFkeSwgV3JlYWR5LCBFcmVhZHksIFJyZWFkeSA9IGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlCglTcGVsbHMgPSAJewoJCQkJCVsiUCJdID0ge25hbWUgPSAiTGVCbGFuY19CYXNlX1BfcG9vZi50cm95In0sCgkJCQkJWyJBQSJdID0ge3JhbmdlID0gNTI1LCBuYW1lID0gIkJhc2ljQXR0YWNrIn0sCgkJCQkJWyJRIl0gPSB7bmFtZSA9ICJTaWdpbCBvZiBNYWxpY2UiLCBzcGVsbG5hbWUgPSAiTGVibGFuY0NoYW9zT3JiIiwgcmFuZ2UgPSA3MDAsIHNwZWVkID0gMjAwMCwgbWFya1RpbWVyID0gMy41LCBhY3RpdmF0ZWQgPSAwfSwKCQkJCQlbIlciXSA9IHtuYW1lID0gIkRpc3RvcnRpb24iLCBzcGVsbG5hbWUgPSAiTGVibGFuY1NsaWRlIiwgcmFuZ2UgPSA2MDAsIHJhZGl1cyA9IDI1MCwgc3BlZWQgPSAyMDAwLCBkZWxheSA9IDAuMjUsIGR1cmF0aW9uID0gNCwgdGltZUFjdGl2YXRlZCA9IDAsIGlzQWN0aXZhdGVkID0gZmFsc2UsIHN0YXJ0UG9zID0gbXlIZXJvLnBvc30sCgkJCQkJWyJFIl0gPSB7bmFtZSA9ICJFdGhlcmVhbCBDaGFpbnMiLCBzcGVsbG5hbWUgPSAiTGVibGFuY1NvdWxTaGFja2xlIiwgcmFuZ2UgPSA5NTAsIHNwZWVkID0gMTYwMCwgZGVsYXkgPSAwLjI1LCByYWRpdXMgPSA5NX0sCgkJCQkJWyJSIl0gPSB7bmFtZSA9ICJNaW1pYyIsIHNwZWxsbmFtZSA9ICJMZWJsYW5jTWltaWMiLCBRbmFtZSA9ICJMZWJsYW5jQ2hhb3NPcmJNIiwgV25hbWUgPSAiTGVCbGFuY1NsaWRlTSIsICBXcmV0dXJubmFtZSA9ICJsZWJsYW5jc2xpZGVyZXR1cm5tIiwgRW5hbWUgPSAiTGVibGFuY1NvdWxTaGFja2xlTSJ9LAoJCQkJCVsiV1IiXSA9IHtkdXJhdGlvbiA9IDQsIHNwZWxsbmFtZSA9ICJMZWJsYW5jU2xpZGVNIiwgdGltZUFjdGl2YXRlZCA9IDAsIGlzQWN0aXZhdGVkID0gZmFsc2UsIHN0YXJ0UG9zID0gbXlIZXJvLnBvc30KCQkJCX0KCUl0ZW1zID0gewoJCUJSSyA9IHsgaWQgPSAzMTUzLCByYW5nZSA9IDQ1MCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LAoJCUJXQyA9IHsgaWQgPSAzMTQ0LCByYW5nZSA9IDQwMCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LAoJCURGRyA9IHsgaWQgPSAzMTI4LCByYW5nZSA9IDc1MCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LAoJCUhHQiA9IHsgaWQgPSAzMTQ2LCByYW5nZSA9IDQwMCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LAoJCVJTSCA9IHsgaWQgPSAzMDc0LCByYW5nZSA9IDM1MCwgcmVxVGFyZ2V0ID0gZmFsc2UsIHNsb3QgPSBuaWwgfSwKCQlTVEQgPSB7IGlkID0gMzEzMSwgcmFuZ2UgPSAzNTAsIHJlcVRhcmdldCA9IGZhbHNlLCBzbG90ID0gbmlsIH0sCgkJVE1UID0geyBpZCA9IDMwNzcsIHJhbmdlID0gMzUwLCByZXFUYXJnZXQgPSBmYWxzZSwgc2xvdCA9IG5pbCB9LAoJCVlHQiA9IHsgaWQgPSAzMTQyLCByYW5nZSA9IDM1MCwgcmVxVGFyZ2V0ID0gZmFsc2UsIHNsb3QgPSBuaWwgfSwKCQlCRlQgPSB7IGlkID0gMzE4OCwgcmFuZ2UgPSA3NTAsIHJlcVRhcmdldCA9IHRydWUsIHNsb3QgPSBuaWwgfSwKCQlSTkQgPSB7IGlkID0gMzE0MywgcmFuZ2UgPSAyNzUsIHJlcVRhcmdldCA9IGZhbHNlLCBzbG90ID0gbmlsIH0KCX0KCglBQWRpc2FibGVkID0gZmFsc2UKCUVuZW1pZXNOZWFyVyA9IHt9CglFbmVtaWVzTmVhcldSID0ge30KCWxhc3RBY3RpdmF0ZWQgPSBuaWwKCgktLSBPcmJXYWxrZXJzCglTQUNsb2FkZWQsIE1NQWxvYWRlZCA9IGZhbHNlLCBmYWxzZQoKCS0tIEtpbGxzdGVhbAoJS2lsbFRleHQgPSB7fQoKCS0tTGlicmFyaWVzCglWUCwgU3hPcmIsIFByb2QgPSBuaWwsIG5pbCwgbmlsCgoJLS0gUHJvZGljdGlvbgoJUHJvZFcsIFByb2RFID0gbmlsLCBuaWwKCgktLSBTdW1tb25lcnMKCWlnbml0ZSwgaGVhbCwgYmFycmllciwgSXJlYWR5LCBIcmVhZHksIEJyZWFkeSA9IGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UKCgktLSBJdGVtcwoJREZHc2xvdCA9IG5pbAoJWmhvbnlhc1NvdCA9IG5pbAoJREZHcmVhZHksIFpoeW9uYXNSZWFkeSA9IGZhbHNlCgoJLS0gQ2xvbmUKCWNsb25lID0gbmlsCgljbG9uZUFjdGl2ZSA9IGZhbHNlCgoJLS0gVGFyZ2V0IHNldHRpbmdzCgl0YXJnZXQgPSBuaWwKCXRzID0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xPV19IUF9QUklPUklUWSwgMTAwMCkKCWV4YW1wbGVUYXJnZXQgPSBuaWwKCgktLSBEZWJ1ZwoJbGFzdENoZWNrZWRXLCBsYXN0Q2hlY2tlZFdSID0gbmlsLCBuaWwKCWxhc3REZWJ1Z0NvbWJvID0gb3MuY2xvY2soKSAtLSBBdm9pZCBzcGFtIG9uIHByZXNzaW5nIGNvbWJvCglsYXN0V0RlYnVnID0gb3MuY2xvY2soKQoJbGFzdFdSRGVidWcgPSBvcy5jbG9jaygpCgoKCS0tTWluaW9uTWFuYWdlcgoJZW5lbXlNaW5pb25zID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksIDYwMCwgbXlIZXJvLCBNSU5JT05fU09SVF9IRUFMVEhfREVDKQoKCS0tIExhZyBGcmVlCglfRy5vbGREcmF3Q2lyY2xlID0gcmF3Z2V0KF9HLCAnRHJhd0NpcmNsZScpCglfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTIKCgoJLS1Qcmlvcml0eQoJcHJpb3JpdHlUYWJsZSA9IHsKCQkJQVAgPSB7CgkJCQkiQW5uaWUiLCAiQWhyaSIsICJBa2FsaSIsICJBbml2aWEiLCAiQW5uaWUiLCAiQnJhbmQiLCAiQ2Fzc2lvcGVpYSIsICJEaWFuYSIsICJFdmVseW5uIiwgIkZpZGRsZVN0aWNrcyIsICJGaXp6IiwgIkdyYWdhcyIsICJIZWltZXJkaW5nZXIiLCAiS2FydGh1cyIsCgkJCQkiS2Fzc2FkaW4iLCAiS2F0YXJpbmEiLCAiS2F5bGUiLCAiS2VubmVuIiwgIkxlYmxhbmMiLCAiTGlzc2FuZHJhIiwgIkx1eCIsICJNYWx6YWhhciIsICJNb3JkZWthaXNlciIsICJNb3JnYW5hIiwgIk5pZGFsZWUiLCAiT3JpYW5uYSIsCgkJCQkiUnl6ZSIsICJTaW9uIiwgIlN3YWluIiwgIlN5bmRyYSIsICJUZWVtbyIsICJUd2lzdGVkRmF0ZSIsICJWZWlnYXIiLCAiVmlrdG9yIiwgIlZsYWRpbWlyIiwgIlhlcmF0aCIsICJaaWdncyIsICJaeXJhIiwgIlZlbGtveiIKCQkJfSwKCgkJCVN1cHBvcnQgPSB7CgkJCQkiQWxpc3RhciIsICJCbGl0emNyYW5rIiwgIkphbm5hIiwgIkthcm1hIiwgIkxlb25hIiwgIkx1bHUiLCAiTmFtaSIsICJOdW51IiwgIlNvbmEiLCAiU29yYWthIiwgIlRhcmljIiwgIlRocmVzaCIsICJaaWxlYW4iLCAiQnJhdW0iCgkJCX0sCgoJCQlUYW5rID0gewoJCQkJIkFtdW11IiwgIkNob2dhdGgiLCAiRHJNdW5kbyIsICJHYWxpbyIsICJIZWNhcmltIiwgIk1hbHBoaXRlIiwgIk1hb2thaSIsICJOYXN1cyIsICJSYW1tdXMiLCAiU2VqdWFuaSIsICJOYXV0aWx1cyIsICJTaGVuIiwgIlNpbmdlZCIsICJTa2FybmVyIiwgIlZvbGliZWFyIiwKCQkJCSJXYXJ3aWNrIiwgIllvcmljayIsICJaYWMiCgkJCX0sCgoJCQlBRF9DYXJyeSA9IHsKCQkJCSJBc2hlIiwgIkNhaXRseW4iLCAiQ29ya2kiLCAiRHJhdmVuIiwgIkV6cmVhbCIsICJHcmF2ZXMiLCAiSmF5Y2UiLCAiSmlueCIsICJLb2dNYXciLCAiTHVjaWFuIiwgIk1hc3RlcllpIiwgIk1pc3NGb3J0dW5lIiwgIlBhbnRoZW9uIiwgIlF1aW5uIiwgIlNoYWNvIiwgIlNpdmlyIiwKCQkJCSJUYWxvbiIsIlRyeW5kYW1lcmUiLCAiVHJpc3RhbmEiLCAiVHdpdGNoIiwgIlVyZ290IiwgIlZhcnVzIiwgIlZheW5lIiwgIllhc3VvIiwgIlplZCIsICJLYWxpc3RhIgoJCQl9LAoKCQkJQnJ1aXNlciA9IHsKCQkJCSJBYXRyb3giLCAiRGFyaXVzIiwgIkVsaXNlIiwgIkZpb3JhIiwgIkdhbmdwbGFuayIsICJHYXJlbiIsICJJcmVsaWEiLCAiSmFydmFuSVYiLCAiSmF4IiwgIktoYXppeCIsICJMZWVTaW4iLCAiTm9jdHVybmUiLCAiT2xhZiIsICJQb3BweSIsCgkJCQkiUmVuZWt0b24iLCAiUmVuZ2FyIiwgIlJpdmVuIiwgIlJ1bWJsZSIsICJTaHl2YW5hIiwgIlRydW5kbGUiLCAiVWR5ciIsICJWaSIsICJNb25rZXlLaW5nIiwgIlhpblpoYW8iCgkJCX0KCX0KCgoKZW5kCgoKZnVuY3Rpb24gT25Mb2FkKCkKCglEZWNsYXJlVmFyaWFibGVzKCkKCQkJU2F5KCJWYXJpYWJsZXMgbG9hZGVkIikKCglTdW1tb25lcnMoKQoJCQlTYXkoIlN1bW1vbmVycyBsb2FkZWQiKQoKCVN4T3JiID0gU3hPcmJXYWxrKCkKCQkJU2F5KCJPcmJXYWxrZXIgbG9hZGVkIikKCglWUCA9IFZQcmVkaWN0aW9uKCkKCglOb3JtYWxXUHJlZCA9IFRhcmdldFByZWRpY3Rpb24oU3BlbGxzLlcucmFuZ2UsIFNwZWxscy5XLnNwZWVkLCBTcGVsbHMuVy5kZWxheSwgU3BlbGxzLlcud2lkdGgpCglOb3JtYWxFUHJlZCA9IFRhcmdldFByZWRpY3Rpb24oU3BlbGxzLkUucmFuZ2UsIFNwZWxscy5FLnNwZWVkLCBTcGVsbHMuRS5kZWxheSwgU3BlbGxzLkUud2lkdGgpCgoJaWYgcHJvZExvYWRlZCB0aGVuCgkJUHJvZCA9IFByb2RpY3RNYW5hZ2VyLkdldEluc3RhbmNlKCkKCQlTYXkoIlByZWRpY3Rpb25zIGxvYWRlZCIpCgkJUHJvZFcgPSBQcm9kOkFkZFByb2RpY3Rpb25PYmplY3QoX1csIFNwZWxscy5XLnJhbmdlLCBTcGVsbHMuVy5zcGVlZCwgU3BlbGxzLlcuZGVsYXksIFNwZWxscy5XLnJhZGl1cykKCQlQcm9kRSA9IFByb2Q6QWRkUHJvZGljdGlvbk9iamVjdChfRSwgU3BlbGxzLkUucmFuZ2UsIFNwZWxscy5FLnNwZWVkLCBTcGVsbHMuRS5kZWxheSwgU3BlbGxzLlcucmFkaXVzKQoJZW5kCgoJU2F5KCJTdWNjZXNmdWxseSBMb2FkZWQgLSBQbGVhc2UgcmVwb3J0IGFueSBidWdzIG9uIHRoZSB0aHJlYWQuIEdpdmUgbWUgYWxsIGluZm9ybWF0aW9uOiBLZXlzIHVzZWQsIFNldHRpbmdzIHVzZWQsIFJlZ2lvbiB5b3UncmUgcGxheWluZyBvbiwgLi4uIikKCglEcmF3TWVudSgpCgoJaWYgaGVyb01hbmFnZXIuaUNvdW50ID09IDEwIHRoZW4KCQlhcnJhbmdlUHJpb3JpdHlzKCkKCQktLVNheSgiQXJyYW5nZWQgUHJpb3JpdGllcyIpCgllbHNlaWYgaGVyb01hbmFnZXIuaUNvdW50ID09IDYgdGhlbgoJCWFycmFuZ2VQcmlvcml0eXNUVCgpCgkJLS1TYXkoIkFycmFuZ2VkIFByaW9yaXRpZXMiKQogICAgZW5kCgoJLS0gVG90YWxseVNlcmllcyBNZXNzYWdlCglzZXJ2ZXJNZXNzYWdlID0gR2V0V2ViUmVzdWx0KFVQREFURV9IT1NULCAiL1gtQm94NzI3NDk2L3gtYm90L21hc3Rlci9SLUJMZUJsYW5jL3RvdGFsbHlzZXJpZXMudHh0IikKCXByaW50KCI8Zm9udCBjb2xvcj1cIiMwMDAwMDBcIj48Yj5SJkIgU2VyaWVzIChMYXRlc3QgTmV3cyk6PC9iPjwvZm9udD4gPGZvbnQgY29sb3I9XCIjZmZhYTAwXCI+IiAuLiB0b3N0cmluZyhzZXJ2ZXJNZXNzYWdlKSAuLiAiPC9mb250PiIpCmVuZAoKZnVuY3Rpb24gT25EcmF3KCkKCWlmIG15SGVyby5kZWFkIHRoZW4gcmV0dXJuIGVuZAoKCWlmIE1lbnUuZHJhd2luZ3MuZHJhdyB0aGVuCgkJaWYgTWVudS5kcmF3aW5ncy5kcmF3USBhbmQgQ2FuRHJhd1NwZWxsKF9RKSB0aGVuCgkJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgU3BlbGxzLlEucmFuZ2UsIFJHQigyNTUsIDEwMiwgMTAyKSkKCQllbmQKCgkJaWYgTWVudS5kcmF3aW5ncy5kcmF3VyBhbmQgQ2FuRHJhd1NwZWxsKF9XKSB0aGVuCgkJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgU3BlbGxzLlcucmFuZ2UsIFJHQigyNTUsIDUxLCAxNTMpKQoJCWVuZAoKCQlpZiBNZW51LmRyYXdpbmdzLmRyYXdFIGFuZCBDYW5EcmF3U3BlbGwoX0UpIHRoZW4KCQkJRHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCBTcGVsbHMuRS5yYW5nZSwgUkdCKDI1NSwgMTUzLCAxNTMpKQoJCWVuZAoKCQlpZiBNZW51LmRyYXdpbmdzLmRyYXdLaWxsYWJsZSB0aGVuCgkJCWZvciBpID0gMSwgaGVyb01hbmFnZXIuaUNvdW50IGRvCgkgCQkJbG9jYWwgZW5lbXkgPSBoZXJvTWFuYWdlcjpnZXRIZXJvKGkpCgkgCQkJaWYgVmFsaWRUYXJnZXQoZW5lbXkpIHRoZW4KCSAJCQkJbG9jYWwgYmFyUG9zID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyhlbmVteS54LCBlbmVteS55LCBlbmVteS56KSkKCQkJCQlsb2NhbCBQb3NYID0gYmFyUG9zLnggLSAzNQoJCQkJCWxvY2FsIFBvc1kgPSBiYXJQb3MueSAtIDUwCgkJCQkJRHJhd1RleHQoS2lsbFRleHRbaV0sIE1lbnUuZHJhd2luZ3MuZHJhd0tpbGxhYmxlV2lkdGgsIFBvc1gsIFBvc1ksIEFSR0IoMjU1LDI1NSwyMDQsMCkpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiBDYW5EcmF3U3BlbGwoc3BlbGwpCglpZiBNZW51LmRyYXdpbmdzLmRyYXdTcGVsbFJlYWR5IHRoZW4KCQlpZiBzcGVsbCA9PSBfUSB0aGVuCgkJCWlmIG5vdCBRcmVhZHkgdGhlbgoJCQkJcmV0dXJuIGZhbHNlCgkJCWVuZAoJCWVsc2VpZiBzcGVsbCA9PSBfVyB0aGVuCgkJCWlmIG5vdCBXcmVhZHkgdGhlbgoJCQkJcmV0dXJuIGZhbHNlCgkJCWVuZAoJCWVsc2VpZiBzcGVsbCA9PSBfRSB0aGVuCgkJCWlmIG5vdCBFcmVhZHkgdGhlbgoJCQkJcmV0dXJuIGZhbHNlCgkJCWVuZAoJCWVuZAoJZW5kCglyZXR1cm4gdHJ1ZQplbmQKCgpmdW5jdGlvbiBPblRpY2soKQoJU3BlbGxSZWFkeUNoZWNrcygpCgllbmVteU1pbmlvbnM6dXBkYXRlKCkKCXRhcmdldCA9IEdldE9yYlRhcmdldCgpCgoJaWYgTWVudS5zZXR0aW5nc1cudXNlT3B0aW9uYWwgdGhlbgoJCVdDaGVja3MoKQoJCUxlQmxhbmNTcGVjaWZpY1NwZWxsQ2hlY2tzKCkKCWVuZAoKCUNhbGNEYW1hZ2UoKQoKCWlmIFN4T3JiOkdldE1vZGUoKSA9PSAxIHRoZW4KCQlDb21ibygpCgllbmQKCglpZiBNZW51LmNvbWJvLmNvbWJvQUEgYW5kIFN4T3JiOkdldE1vZGUoKSA9PSAxIHRoZW4KCQlpZiBTeE9yYkxvYWRlZCBhbmQgQUFkaXNhYmxlZCB0aGVuCgkJCVN4T3JiOkVuYWJsZUF0dGFja3MoKQoJCQlBQWRpc2FibGVkID0gZmFsc2UKCQllbmQKCWVuZAoKCWlmIFN4T3JiOkdldE1vZGUoKSA9PSAxIGFuZCBub3QgTWVudS5jb21iby5jb21ib0FBIHRoZW4KCQlpZiBub3QgQUFkaXNhYmxlZCB0aGVuCgkJCVN4T3JiOkRpc2FibGVBdHRhY2tzKCkKCQkJQUFkaXNhYmxlZCA9IHRydWUKCQllbmQKCWVuZAoKCWlmIFN4T3JiOkdldE1vZGUoKSA9PSAyIHRoZW4KCQlIYXJhc3MoKQoJZW5kCgoJaWYgTWVudS5rZXlzZXR0aW5ncy51c2VGYXJtIGFuZCBub3QgU3hPcmI6R2V0TW9kZSgpID09IDEgYW5kIG5vdCBTeE9yYjpHZXRNb2RlKCkgPT0gMiBhbmQgbm90IFN4T3JiOkdldE1vZGUoKSA9PSAzIHRoZW4KCQlGYXJtKCkKCWVuZAoKCWlmIFN4T3JiOkdldE1vZGUoKSA9PSAzIHRoZW4KCQlMYW5lQ2xlYXIoKQoJZW5kCgoJaWYgTWVudS5raWxsc3RlYWwua2lsbHN0ZWFsIGFuZCBTeE9yYjpHZXRNb2RlKCkgPT0gMCB0aGVuCgkJS2lsbFN0ZWFsKCkKCWVuZAoKCWlmIE1lbnUubWlzYy56aG9ueWFzLnpob255YXMgYW5kIG5vdCBJbkZvdW50YWluKCkgdGhlbgoJCVpob255YXMoKQoJZW5kCgoJaWYgaWduaXRlIH49IG5pbCB0aGVuCgkJaWYgTWVudS5taXNjLmF1dG9pZ25pdGUudXNlSWduaXRlIHRoZW4KCQkJVXNlSWduaXRlKCkKCQllbmQKCWVuZAoKZW5kCgpmdW5jdGlvbiBPblByb2Nlc3NTcGVsbChvYmosIHNwZWxsKQogICAgaWYgb2JqLmlzTWUgYW5kIHNwZWxsLm5hbWUgPT0gU3BlbGxzLlcuc3BlbGxuYW1lIHRoZW4KCSAgICBTcGVsbHMuVy5zdGFydFBvcyA9IHNwZWxsLnN0YXJ0UG9zCgkJICAgCWlmIE1lbnUuZGVidWcudXNlRGVidWcgdGhlbgoJCSAgIAkJU2F5KCJBY3RpdmF0ZWQgVzoiKQoJCSAgIAkJcHJpbnQoU3BlbGxzWyJXIl0pCgkJICAgCWVuZAogICAgZW5kCgogICAgaWYgb2JqLmlzTWUgYW5kIHNwZWxsLm5hbWUgPT0gU3BlbGxzLldSLnNwZWxsbmFtZSB0aGVuCgkgICAgU3BlbGxzLldSLnN0YXJ0UG9zID0gc3BlbGwuc3RhcnRQb3MKCQkgICAJaWYgTWVudS5kZWJ1Zy51c2VEZWJ1ZyB0aGVuCgkJICAgCQlTYXkoIkFjdGl2YXRlZCBXIGJ5IFI6ICIpCgkJICAgCQlwcmludChTcGVsbHNbIldSIl0pCgkJICAgCWVuZAoJZW5kCgogICAgaWYgKG9iai5pc01lIGFuZCBzcGVsbC5uYW1lID09IFNwZWxscy5RLnNwZWxsbmFtZSkgb3IgKG9iai5pc01lIGFuZCBzcGVsbC5uYW1lID09IFNwZWxscy5XLnNwZWxsbmFtZSkgb3IgKG9iai5pc01lIGFuZCBzcGVsbC5uYW1lID09IFNwZWxscy5FLnNwZWxsbmFtZSkgdGhlbgogICAgCWxhc3RBY3RpdmF0ZWQgPSBzcGVsbC5uYW1lCgkgICAgCWlmIE1lbnUuZGVidWcudXNlRGVidWcgdGhlbgoJICAgIAkJU2F5KCJMYXN0IGNhc3RlZCBzcGVsbDogPSAiIC4uIGxhc3RBY3RpdmF0ZWQpCgkgICAgCWVuZAogICAgZW5kCgplbmQKCmZ1bmN0aW9uIExlQmxhbmNTcGVjaWZpY1NwZWxsQ2hlY2tzKCkKCS0tIFcgQWN0aXZhdGVkIFNldHRpbmdzCgkJLS0gVyBhbmQgVyBieSBSIGFjdGl2YXRlZAoJaWYgTWVudS5zZXR0aW5nc1cudXNlT3B0aW9uYWxXID09IDEgdGhlbgoJCWlmIHdVc2VkKCkgYW5kIHdyVXNlZCgpIHRoZW4KCQkJaWYgI0VuZW1pZXNOZWFyV1IgPCAjRW5lbWllc05lYXJXIGFuZCAjRW5lbWllc05lYXJXUiA8IENvdW50RW5lbXlIZXJvSW5SYW5nZSg2MDApIHRoZW4KCQkJCWlmIG5vdCBRcmVhZHkgYW5kIG5vdCBFcmVhZHkgdGhlbgoJCQkJCUNhc3RTcGVsbChfUikKCQkJCWVuZAoJCQllbHNlaWYgI0VuZW1pZXNOZWFyVyA+ICNFbmVtaWVzTmVhcldSIGFuZCAjRW5lbWllc05lYXJXIDwgQ291bnRFbmVteUhlcm9JblJhbmdlKDYwMCkgdGhlbgoJCQkJaWYgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuCgkJCQkJQ2FzdFNwZWxsKF9XKQoJCQkJZW5kCgkJCWVuZAoJCQktLSBOb3JtYWwgVwoJCWVsc2VpZiB3VXNlZCgpIHRoZW4KCQkJaWYgKCNFbmVtaWVzTmVhclcgPCBDb3VudEVuZW15SGVyb0luUmFuZ2UoNjAwKSkgdGhlbgoJCQkJaWYgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuCgkJCQkJQ2FzdFNwZWxsKF9XKQoJCQkJZW5kCgkJCWVuZAoJCQktLSBXIGFjdGl2YXRlZCBieSB1c2luZyBSCgkJZWxzZWlmIHdyVXNlZCgpIHRoZW4KCQkJaWYgI0VuZW1pZXNOZWFyV1IgPCBDb3VudEVuZW15SGVyb0luUmFuZ2UoNjAwKSB0aGVuCgkJCQlpZiBub3QgUXJlYWR5IGFuZCBub3QgRXJlYWR5IHRoZW4KCQkJCQlDYXN0U3BlbGwoX1cpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbHNlaWYgTWVudS5zZXR0aW5nc1cudXNlT3B0aW9uYWxXID09IDMgb3IgTWVudS5zZXR0aW5nc1cudXNlT3B0aW9uYWxXID09IDQgdGhlbgoJCWlmIHdVc2VkKCkgYW5kIHdyVXNlZCgpIHRoZW4KCQkJaWYgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuCgkJCQlDYXN0U3BlbGwoX1cpCgkJCWVuZAoJCWVsc2VpZiB3VXNlZCgpIHRoZW4KCQkJaWYgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuCgkJCUNhc3RTcGVsbChfVykKCQkJZW5kCgkJZWxzZWlmIHdyVXNlZCgpIHRoZW4KCQkJaWYgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuCgkJCQlDYXN0U3BlbGwoX1cpCgkJCWVuZAoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gV0NoZWNrcygpCglpZiB3VXNlZCgpIHRoZW4KCQlmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvCgkJCWxvY2FsIGVuZW15cmFuZ2UgPSBlbmVteS5yYW5nZSBhbmQgZW5lbXkucmFuZ2UgKiBlbmVteS5yYW5nZSBvciA2MDAgKiA2MDAKCQkJaWYgR2V0RGlzdGFuY2VTcXIoZW5lbXksIFNwZWxscy5XLnN0YXJ0UG9zKSA8IGVuZW15cmFuZ2UgYW5kIG5vdCB0YWJsZS5jb250YWlucyhFbmVtaWVzTmVhclcsIGVuZW15KSB0aGVuCgkJCQl0YWJsZS5pbnNlcnQoRW5lbWllc05lYXJXLCBlbmVteSkKCQkJZW5kCgkJCWlmIEdldERpc3RhbmNlU3FyKGVuZW15LCBTcGVsbHMuVy5zdGFydFBvcykgPiBlbmVteXJhbmdlIHRoZW4KCQkJCWlmIHRhYmxlLmNvbnRhaW5zKEVuZW1pZXNOZWFyVywgZW5lbXkpIHRoZW4KCQkJCQl0YWJsZS5yZW1vdmUoRW5lbWllc05lYXJXLCBpKQoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCglpZiB3clVzZWQoKSB0aGVuCgkJZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbwoJCQlsb2NhbCBlbmVteXJhbmdlID0gZW5lbXkucmFuZ2UgYW5kIGVuZW15LnJhbmdlICogZW5lbXkucmFuZ2Ugb3IgNjAwCgkJCWlmIEdldERpc3RhbmNlU3FyKGVuZW15LCBTcGVsbHMuV1Iuc3RhcnRQb3MpIDwgZW5lbXlyYW5nZSBhbmQgbm90IHRhYmxlLmNvbnRhaW5zKEVuZW1pZXNOZWFyV1IsIGVuZW15KSB0aGVuCgkJCQl0YWJsZS5pbnNlcnQoRW5lbWllc05lYXJXUiwgZW5lbXkpCgkJCWVuZAoJCQlpZiBHZXREaXN0YW5jZVNxcihlbmVteSwgU3BlbGxzLldSLnN0YXJ0UG9zKSA+IGVuZW15cmFuZ2UgdGhlbgoJCQkJdGFibGUucmVtb3ZlKEVuZW1pZXNOZWFyV1IsIGkpCgkJCWVuZAoJCWVuZAoJZW5kCglpZiBub3Qgd1VzZWQoKSBhbmQgI0VuZW1pZXNOZWFyVyA+PSAxIHRoZW4KCQlmb3IgaSwgXyBpbiBpcGFpcnMoRW5lbWllc05lYXJXKSBkbwoJCQl0YWJsZS5yZW1vdmUoRW5lbWllc05lYXJXLCBpKQoJCWVuZAoJZW5kCglpZiBub3Qgd3JVc2VkKCkgYW5kICNFbmVtaWVzTmVhcldSIHRoZW4KCQlmb3IgaSwgXyBpbiBpcGFpcnMoRW5lbWllc05lYXJXUikgZG8KCQkJdGFibGUucmVtb3ZlKEVuZW1pZXNOZWFyV1IsIGkpCgkJZW5kCgllbmQKZW5kCgoKZnVuY3Rpb24gQ29tYm8oKQoJaWYgbXlIZXJvLmRlYWQgdGhlbiByZXR1cm4gZW5kCglpZiB0YXJnZXQgfj0gbmlsIGFuZCBWYWxpZFRhcmdldCh0YXJnZXQsIDYwMCkgdGhlbgoKCQlleGFtcGxlVGFyZ2V0ID0gdGFyZ2V0CgoJCQlpZiBNZW51LmRlYnVnLnVzZURlYnVnIGFuZCBsYXN0RGVidWdDb21ibyArIDIgPCBvcy5jbG9jaygpIHRoZW4KCQkJCVNheSgiVGFyZ2V0OiAiIC4uIHRhcmdldC5jaGFyTmFtZSkKCQkJCWxhc3REZWJ1Z0NvbWJvID0gb3MuY2xvY2soKQoJCSAgICBlbmQKCgkJaWYgTWVudS5jb21iby5jb21ib0l0ZW1zIHRoZW4KCQkJVXNlSXRlbXModGFyZ2V0KQoJCWVuZAoJCS0tLS0tLS0tLS0tLS0tLS0gU21hcnQgQ29tYm8gLS0tLS0tLS0tLS0tLS0KCQlpZiBNZW51LmNvbWJvLmNvbWJvV2F5ID09IDEgdGhlbgoJCQljb21ibyA9IFNtYXJ0Q29tYm8odGFyZ2V0KQoJCS0tLS0tLS0tLS0tLS0tLS0tIFFSV0UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZWxzZWlmIE1lbnUuY29tYm8uY29tYm9XYXkgPT0gMiB0aGVuCgkJCWNvbWJvID0ge19RfQoJCQlEZWxheUFjdGlvbihmdW5jdGlvbih0YXJnZXQpIGNvbWJvID0ge19SLCBfVywgX0V9IFBlcmZvcm1Db21ibyhjb21ibywgdGFyZ2V0KSBlbmQsIDAuNSwge3RhcmdldH0pCgkJLS0tLS0tLS0tLS0tLS0tLSBRV1JFIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZWxzZWlmIE1lbnUuY29tYm8uY29tYm9XYXkgPT0gMyB0aGVuCgkJCWNvbWJvID0ge19RLCBfV30KCQkJRGVsYXlBY3Rpb24oZnVuY3Rpb24odGFyZ2V0KSBjb21ibyA9IHtfUiwgX0V9IFBlcmZvcm1Db21ibyhjb21ibywgdGFyZ2V0KSBlbmQsIDAuNSwge3RhcmdldH0pCgkJLS0tLS0tLS0tLS0tLS0tLS0tIFdRUkUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWVsc2VpZiBNZW51LmNvbWJvLmNvbWJvV2F5ID09IDQgdGhlbgoJCQljb21ibyA9IHtfVywgX1F9CgkJCURlbGF5QWN0aW9uKGZ1bmN0aW9uKHRhcmdldCkgY29tYm8gPSB7X1IsIF9FfSBQZXJmb3JtQ29tYm8oY29tYm8sIHRhcmdldCkgZW5kLCAwLjUsIHt0YXJnZXR9KQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0gV1JRRSAtLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWVsc2VpZiBNZW51LmNvbWJvLmNvbWJvV2F5ID09IDUgdGhlbgoJCQljb21ibyA9IHtfV30KCQkJRGVsYXlBY3Rpb24oZnVuY3Rpb24odGFyZ2V0KSBjb21ibyA9IHtfUiwgX1EsIF9FfSBQZXJmb3JtQ29tYm8oY29tYm8sIHRhcmdldCkgZW5kLCAwLjUsIHt0YXJnZXR9KQoJCWVuZAoKCQlQZXJmb3JtQ29tYm8oY29tYm8sIHRhcmdldCkKCgkJLS0gUmV0dXJuIHRvIGJhc2ljIFcgaWYgdGFyZ2V0IGlzIGRlYWQgZHVyaW5nIGNvbWJvCgkJaWYgZXhhbXBsZVRhcmdldCBhbmQgZXhhbXBsZVRhcmdldC5kZWFkIGFuZCB3VXNlZCgpIGFuZCBNZW51LnNldHRpbmdzVy51c2VPcHRpb25hbCBhbmQgKE1lbnUuc2V0dGluZ3NXLnVzZU9wdGlvbmFsVyA9PSAyIG9yIE1lbnUuc2V0dGluZ3NXLnVzZU9wdGlvbmFsVyA9PSA0KSB0aGVuCgkJCUNhc3RTcGVsbChfVykKCQllbmQKCgkJZXhhbXBsZVRhcmdldCA9IG5pbAoKCWVuZAplbmQKCgotLSBIYXJhc3MgKEluIHByb2dyZXNzKQpmdW5jdGlvbiBIYXJhc3MoKQoJbG9jYWwgY2FzdGVkVyA9IGZhbHNlCgoJaWYgdGFyZ2V0IH49IG5pbCBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0KSBhbmQgTWFuYU1hbmFnZXIoKSB0aGVuCgkJCWlmIE1lbnUuZGVidWcudXNlRGVidWcgdGhlbgoJCSAgICAJU2F5KCJQZXJmb3JtaW5nIGhhcmFzcyBvbjogIiAuLiB0YXJnZXQuY2hhck5hbWUpCgkJICAJZW5kCgkJaWYgTWVudS5oYXJhc3MuaGFyYXNzUSB0aGVuCgkJCUNhc3RRKHRhcmdldCkKCQllbmQKCQlpZiBNZW51LmhhcmFzcy5oYXJhc3NXIHRoZW4KCQkJaWYgQ2FzdFcodGFyZ2V0KSB0aGVuIGNhc3RlZFcgPSB0cnVlIGVuZAoJCWVuZAoJCWlmIE1lbnUuaGFyYXNzLmhhcmFzc0UgdGhlbgoJCQlDYXN0RSh0YXJnZXQpCgkJZW5kCgkJaWYgY2FzdGVkVyA9PSB0cnVlIGFuZCB3VXNlZCgpIHRoZW4gQ2FzdFNwZWxsKF9XKSBlbmQKCWVuZAplbmQKCgotLSBJbiBQcm9ncmVzcwpmdW5jdGlvbiBGYXJtKCkKCWxvY2FsIGhhc0Nhc3RlZCA9IGZhbHNlCgoJaWYgTWVudS5mYXJtLmZhcm1BQSBhbmQgU3hPcmI6Q2FuQXR0YWNrKCkgPT0gdHJ1ZSB0aGVuIHJldHVybiBlbmQKCglpZiBNZW51LmZhcm0uZmFybVEgdGhlbgoJCWZvciBpLCBtaW5pb24gaW4gaXBhaXJzKGVuZW15TWluaW9ucy5vYmplY3RzKSBkbwoJCQlpZiBNZW51LmZhcm0uZmFybVJhbmdlIGFuZCBHZXREaXN0YW5jZVNxcihtaW5pb24pIDwgU3BlbGxzLkFBLnJhbmdlICogU3BlbGxzLkFBLnJhbmdlIGFuZCBHZXREaXN0YW5jZVNxZShtaW5pb24pIDwgU3BlbGxzLlEucmFuZ2UgKiBTcGVsbHMuUS5yYW5nZSB0aGVuCgkJCQlpZiBnZXREbWcoIlEiLCBtaW5pb24sIG15SGVybykgPiBtaW5pb24uaGVhbHRoIHRoZW4KCQkJCQlpZiBDYXN0UShtaW5pb24sIGZhbHNlKSB0aGVuIGhhc0Nhc3RlZCA9IHRydWUgZW5kCgkJCQllbmQKCQkJCWlmIGhhc0Nhc3RlZCA9PSB0cnVlIHRoZW4gYnJlYWsgZW5kCgkJCWVuZAoJCQlpZiBub3QgTWVudS5mYXJtLmZhcm1SYW5nZSBhbmQgR2V0RGlzdGFuY2VTcXIobWluaW9uKSA8IFNwZWxscy5RLnJhbmdlICogU3BlbGxzLlEucmFuZ2UgdGhlbgoJCQkJaWYgZ2V0RG1nKCJRIiwgbWluaW9uLCBteUhlcm8pID4gbWluaW9uLmhlYWx0aCB0aGVuCgkJCQkJaWYgQ2FzdFEobWluaW9uLCBmYWxzZSkgdGhlbiBoYXNDYXN0ZWQgPSB0cnVlIGVuZAoJCQkJCWlmIGhhc0Nhc3RlZCB0aGVuIENhc3RTcGVsbChfVykgZW5kCgkJCQllbmQKCQkJCWlmIGhhc0Nhc3RlZCA9PSB0cnVlIHRoZW4gYnJlYWsgZW5kCgkJCWVuZAoJCWVuZAoJZW5kCglpZiBoYXNDYXN0ZWQgdGhlbiByZXR1cm4gZW5kCglpZiBNZW51LmZhcm0uZmFybVcgdGhlbgoJCWZvciBpLCBtaW5pb24gaW4gaXBhaXJzKGVuZW15TWluaW9ucy5vYmplY3RzKSBkbwoJCQlpZiBNZW51LmZhcm0uZmFybVJhbmdlIGFuZCBHZXREaXN0YW5jZVNxcihtaW5pb24pIDwgU3BlbGxzLkFBLnJhbmdlICogU3BlbGxzLkFBLnJhbmdlIGFuZCBHZXREaXN0YW5jZVNxcihtaW5pb24pIDwgU3BlbGxzLlcucmFuZ2UgKiBTcGVsbHMuVy5yYW5nZSB0aGVuCgkJCQlpZiBnZXREbWcoIlciLCBtaW5pb24sIG15SGVybykgPiBtaW5pb24uaGVhbHRoIHRoZW4KCQkJCQlpZiBDYXN0VyhtaW5pb24sIGZhbHNlKSB0aGVuCgkJCQkJCUNhc3RTcGVsbChfVykKCQkJCQkJaGFzQ2FzdGVkID0gdHJ1ZQoJCQkJCQlicmVhawoJCQkJCQlyZXR1cm4KCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQkJaWYgbm90IE1lbnUuZmFybS5mYXJtUmFuZ2UgYW5kIEdldERpc3RhbmNlU3FyKG1pbmlvbikgPCBTcGVsbHMuVy5yYW5nZSAqIFNwZWxscy5XLnJhbmdlIHRoZW4KCQkJCWlmIFdyZWFkeSBhbmQgZ2V0RG1nKCJXIiwgbWluaW9uLCBteUhlcm8pID4gbWluaW9uLmhlYWx0aCB0aGVuCgkJCQkJaWYgQ2FzdFcobWluaW9uLCBmYWxzZSkgdGhlbgoJCQkJCQlDYXN0U3BlbGwoX1cpCgkJCQkJCWhhc0Nhc3RlZCA9IHRydWUKCQkJCQkJYnJlYWsKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZAoJaWYgaGFzQ2FzdGVkIHRoZW4gcmV0dXJuIGVuZAplbmQKCmZ1bmN0aW9uIExhbmVDbGVhcigpCglpZiBNZW51LmxhbmVjbGVhci5sYW5lY2xlYXJRIHRoZW4KCQlmb3IgaSwgbWluaW9uIGluIGlwYWlycyhlbmVteU1pbmlvbnMub2JqZWN0cykgZG8KCQkJaWYgR2V0RGlzdGFuY2VTcXIobWluaW9uKSA8IFNwZWxscy5RLnJhbmdlICogU3BlbGxzLlEucmFuZ2UgdGhlbgoJCQkJQ2FzdFNwZWxsKF9RLCBtaW5pb24pCgkJCQlicmVhawoJCQllbmQKCQllbmQKCWVuZAoJaWYgTWVudS5sYW5lY2xlYXIubGFuZWNsZWFyVyBhbmQgTWVudS5sYW5lY2xlYXIubGFuZWNsZWFyUiBhbmQgUnJlYWR5IGFuZCBXcmVhZHkgdGhlbgoJCWlmIG5vdCB3VXNlZCgpIGFuZCBub3Qgd3JVc2VkKCkgdGhlbgoJCQlsb2NhbCBjYXN0UG9zaXRpb24sIHhUYXJnZXRzID0gR2V0QmVzdEFPRVBvc2l0aW9uKGVuZW15TWluaW9ucy5vYmplY3RzLCBTcGVsbHMuVy5yYW5nZSwgU3BlbGxzLlcucmFkaXVzLCBteUhlcm8pCgkJCWlmIGNhc3RQb3NpdGlvbiB+PSBuaWwgdGhlbgoJCQkJQ2FzdFNwZWxsKF9SLCBjYXN0UG9zaXRpb24ueCwgY2FzdFBvc2l0aW9uLnopCgkJCWVuZAoKCQkJY2FzdFBvc2l0aW9uLCB4VGFyZ2V0cyA9IEdldEJlc3RBT0VQb3NpdGlvbihlbmVteU1pbmlvbnMub2JqZWN0cywgU3BlbGxzLlcucmFuZ2UsIFNwZWxscy5XLnJhZGl1cywgbXlIZXJvKQoJCQlpZiBjYXN0UG9zaXRpb24gfj0gbmlsIHRoZW4KCQkJCUNhc3RTcGVsbChfVywgY2FzdFBvc2l0aW9uLngsIGNhc3RQb3NpdGlvbi56KQoJCQllbmQKCgkJZW5kCgkJaWYgd1VzZWQoKSB0aGVuCgkJCUNhc3RTcGVsbChfVykKCQllbmQKCgllbHNlaWYgTWVudS5sYW5lY2xlYXIubGFuZWNsZWFyVyBhbmQgV3JlYWR5IHRoZW4KCQlsb2NhbCBjYXN0UG9zaXRpb24sIHhUYXJnZXRzID0gR2V0QmVzdEFPRVBvc2l0aW9uKGVuZW15TWluaW9ucy5vYmplY3RzLCBTcGVsbHMuVy5yYW5nZSwgU3BlbGxzLlcucmFkaXVzLCBteUhlcm8pCgkJaWYgY2FzdFBvc2l0aW9uIH49IG5pbCB0aGVuCgkJCUNhc3RTcGVsbChfVywgY2FzdFBvc2l0aW9uLngsIGNhc3RQb3NpdGlvbi56KQoJCQlDYXN0U3BlbGwoX1cpCgkJZW5kCgoJZWxzZWlmIE1lbnUubGFuZWNsZWFyLmxhbmVjbGVhclIgYW5kIFJyZWFkeSB0aGVuCgkJbG9jYWwgY2FzdFBvc2l0aW9uLCB4VGFyZ2V0cyA9IEdldEJlc3RBT0VQb3NpdGlvbihlbmVteU1pbmlvbnMub2JqZWN0cywgU3BlbGxzLlcucmFuZ2UsIFNwZWxscy5XLnJhZGl1cywgbXlIZXJvKQoJCWlmIGNhc3RQb3NpdGlvbiB+PSBuaWwgdGhlbgoJCQlDYXN0U3BlbGwoX1IsIGNhc3RQb3NpdGlvbi54LCBjYXN0UG9zaXRpb24ueikKCQkJQ2FzdFNwZWxsKF9SKQoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gS2lsbFN0ZWFsKCkKCWZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8KCQlpZiBWYWxpZFRhcmdldChlbmVteSwgNjAwKSBhbmQgbm90IGVuZW15LmRlYWQgYW5kIGVuZW15LnZpc2libGUgYW5kIE1lbnUua2lsbHN0ZWFsLmVuZW1pZXNbZW5lbXkuY2hhck5hbWVdIHRoZW4KCQkJbG9jYWwgUWRtZyA9ICgoUXJlYWR5IGFuZCBNZW51LmtpbGxzdGVhbC5raWxsc3RlYWxRIGFuZCBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUSIsIGVuZW15KSkgb3IgMCkKCQkJbG9jYWwgUlFkbWcgPSAoKFJyZWFkeSBhbmQgbGFzdEFjdGl2YXRlZCA9PSBTcGVsbHMuUS5zcGVsbG5hbWUgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJSUSIsIGVuZW15KSkgb3IgMCkKCQkJbG9jYWwgUWRtZ01hcmsgPSAoKChRcmVhZHkgb3IgUnJlYWR5KSBhbmQgKE1lbnUua2lsbHN0ZWFsLmtpbGxzdGVhbFEgb3IgTWVudS5raWxsc3RlYWwua2lsbHN0ZWFsUikgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJRUHJvYyIsIGVuZW15KSkgb3IgMCkKCQkJbG9jYWwgV2RtZyA9ICgoV3JlYWR5IGFuZCBNZW51LmtpbGxzdGVhbC5raWxsc3RlYWxXIGFuZCBTcGVsbERtZ0NhbGN1bGF0aW9ucygiVyIsIGVuZW15KSkgb3IgMCkKCQkJbG9jYWwgUldkbWcgPSAoKFJyZWFkeSBhbmQgTWVudS5raWxsc3RlYWwua2lsbHN0ZWFsUiBhbmQgbm90IHdyVXNlZCgpIGFuZCBsYXN0QWN0aXZhdGVkID09IFNwZWxscy5XLnNwZWxsbmFtZSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlJXIiwgZW5lbXkpKSBvciAwKQoJCQlsb2NhbCBFZG1nID0gKChFcmVhZHkgYW5kIE1lbnUua2lsbHN0ZWFsLmtpbGxzdGVhbEUgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJFIiwgZW5lbXkpKSBvciAwKQoJCQlpZiBRZG1nID4gV2RtZyBhbmQgV2RtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlDYXN0VyhlbmVteSkKCQkJCQkJaWYgTWVudS5kZWJ1Zy51c2VEZWJ1ZyB0aGVuCgkJCQkJCQlTYXkoIkVudGVyZWQgRklSU1QgZW50cnkgb2YgS2lsbHN0ZWFsIG9uICIgLi4gdG9zdHJpbmcoZW5lbXkuY2hhck5hbWUpOnVwcGVyKCkpCgkJCQkJCWVuZAoJCQllbHNlaWYgUWRtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlDYXN0UShlbmVteSkKCQkJCQkJaWYgTWVudS5kZWJ1Zy51c2VEZWJ1ZyB0aGVuCgkJCQkJCQlTYXkoIkVudGVyZWQgU0VDT05EIGVudHJ5IG9mIEtpbGxzdGVhbCBvbiAiIC4uIHRvc3RyaW5nKGVuZW15LmNoYXJOYW1lKTp1cHBlcigpKQoJCQkJCQllbmQKCQkJZWxzZWlmIEVDYXN0IH49IG5pbCBhbmQgRWRtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlDYXN0RShlbmVteSkKCQkJCQkJaWYgTWVudS5kZWJ1Zy51c2VEZWJ1ZyB0aGVuCgkJCQkJCQlTYXkoIkVudGVyZWQgVEhJUkQgZW50cnkgb2YgS2lsbHN0ZWFsIG9uICIgLi4gdG9zdHJpbmcoZW5lbXkuY2hhck5hbWUpOnVwcGVyKCkpCgkJCQkJCWVuZAoJCQllbHNlaWYgUlFkbWcgPiBSV2RtZyBhbmQgUldkbWcgPiBlbmVteS5oZWFsdGggdGhlbgoJCQkJQ2FzdFIoZW5lbXksIF9XKQoJCQllbHNlaWYgUlFkbWcgPiBlbmVteS5oZWFsdGggdGhlbgoJCQkJQ2FzdFIoZW5lbXksIF9RKQoJCQllbmQKCQllbmQKCWVuZAplbmQKCi0tIE9idGFpbiBhIHRhcmdldApmdW5jdGlvbiBHZXRPcmJUYXJnZXQoKQoJdHM6dXBkYXRlKCkKCWlmIFN4T3JibG9hZGVkIHRoZW4gcmV0dXJuIFN4T3JiOkdldFRhcmdldCgxMzAwKSBlbmQKCXJldHVybiB0cy50YXJnZXQKZW5kCgotLSBaaG9ueWFzIHNldHRpbmdzOiBXaWxsIGJlIHVwZGF0ZWQgYW5kIGltcHJvdmVkCmZ1bmN0aW9uIFpob255YXMoKQoJbG9jYWwgelNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTU3KQoJaWYgelNsb3Qgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoelNsb3QpID09IFJFQURZIHRoZW4KCQlpZiAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGgpIDw9IE1lbnUubWlzYy56aG9ueWFzLnpob255YXN1bmRlciB0aGVuCgkJCUNhc3RTcGVsbCh6U2xvdCkKCQllbmQKCWVuZAplbmQKCgpmdW5jdGlvbiBVc2VJZ25pdGUoKQoJbG9jYWwgaURtZyA9ICg1MCArICgyMCAqIG15SGVyby5sZXZlbCkpCglmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvCgkJaWYgR2V0RGlzdGFuY2UoZW5lbXksIG15SGVybykgPCA2MDAgYW5kIFZhbGlkVGFyZ2V0KGVuZW15LCA2MDApIGFuZCBNZW51Lm1pc2MuYXV0b2lnbml0ZVtlbmVteS5jaGFyTmFtZV0gdGhlbgoJCQlpZiBJcmVhZHkgdGhlbgoJCQkJaWYgZW5lbXkuaGVhbHRoIDwgaURtZyB0aGVuCgkJCQkJQ2FzdFNwZWxsKGlnbml0ZSwgZW5lbXkpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiBNYW5hTWFuYWdlcigpCglpZiAoKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEpIDw9IE1lbnUuaGFyYXNzLmhhcmFzc01hbmEpIHRoZW4KCQlyZXR1cm4gZmFsc2UKCWVuZAoJcmV0dXJuIHRydWUKZW5kCgoKZnVuY3Rpb24gU2V0UHJpb3JpdHkodGFibGUsIGhlcm8sIHByaW9yaXR5KQoJZm9yIGk9MSwgI3RhYmxlLCAxIGRvCgkJaWYgaGVyby5jaGFyTmFtZTpmaW5kKHRhYmxlW2ldKSB+PSBuaWwgdGhlbgoJCQlUU19TZXRIZXJvUHJpb3JpdHkocHJpb3JpdHksIGhlcm8uY2hhck5hbWUpCgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiBhcnJhbmdlUHJpb3JpdHlzKCkKICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFEX0NhcnJ5LCBlbmVteSwgMSkKCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFQLCAgICAgICBlbmVteSwgMikKCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlN1cHBvcnQsICBlbmVteSwgMykKCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkJydWlzZXIsICBlbmVteSwgNCkKCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlRhbmssICAgICBlbmVteSwgNSkKICAgIGVuZAplbmQKCmZ1bmN0aW9uIGFycmFuZ2VQcmlvcml0eXNUVCgpCiAgICBmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BRF9DYXJyeSwgZW5lbXksIDEpCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BUCwgICAgICAgZW5lbXksIDEpCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5TdXBwb3J0LCAgZW5lbXksIDIpCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5CcnVpc2VyLCAgZW5lbXksIDIpCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5UYW5rLCAgICAgZW5lbXksIDMpCiAgICBlbmQKZW5kCgoKLS0tIENyZWRpdHMgdG8gd2hvZXZlciBtYWRlIHRoZSBVc2VJdGVtcywgd2FzIHRvbyBsYXp5IHRvIGdldCB0aGUgY29ycmVjdCBpdGVtIElEUyBteXNlbGYgLS0tLQpmdW5jdGlvbiBVc2VJdGVtcyh1bml0KQoJaWYgdW5pdCB+PSBuaWwgdGhlbgoJCWZvciBfLCBpdGVtIGluIHBhaXJzKEl0ZW1zKSBkbwoJCQlpdGVtLnNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbShpdGVtLmlkKQoJCQlpZiBpdGVtLnNsb3Qgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoaXRlbS5zbG90KSA9PSBSRUFEWSB0aGVuCgkJCQlpZiBpdGVtLnJlcVRhcmdldCBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCBpdGVtLnJhbmdlIHRoZW4KCQkJCQlDYXN0U3BlbGwoaXRlbS5zbG90LCB1bml0KQoJCQkJZWxzZWlmIG5vdCBpdGVtLnJlcVRhcmdldCB0aGVuCgkJCQkJaWYgKEdldERpc3RhbmNlKHVuaXQpIC0gZ2V0SGl0Qm94UmFkaXVzKG15SGVybykgLSBnZXRIaXRCb3hSYWRpdXModW5pdCkpIDwgNTAgdGhlbgoJCQkJCQlDYXN0U3BlbGwoaXRlbS5zbG90KQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gQ2FsY0RhbWFnZSgpCglmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbwoJCWxvY2FsIGVuZW15ID0gaGVyb01hbmFnZXI6Z2V0SGVybyhpKQoJCWlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuCgkJCWxvY2FsIFFkbWcgPSAoKFFyZWFkeSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlEiLCBlbmVteSkpIG9yIDApCgkJCWxvY2FsIFJRZG1nID0gKChRcmVhZHkgYW5kIGxhc3RBY3RpdmF0ZWQgPT0gU3BlbGxzLlEuc3BlbGxuYW1lIGFuZCBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUlEiLCBlbmVteSkpIG9yIDApCgkJCWxvY2FsIFFkbWdNYXJrID0gKCgoUXJlYWR5IG9yIFJyZWFkeSkgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJRUHJvYyIsIGVuZW15KSkgb3IgMCkKCQkJbG9jYWwgV2RtZyA9ICgoV3JlYWR5IGFuZCBTcGVsbERtZ0NhbGN1bGF0aW9ucygiVyIsIGVuZW15KSkgb3IgMCkKCQkJbG9jYWwgUldkbWcgPSAoKFJyZWFkeSBhbmQgbm90IHdyVXNlZCgpIGFuZCBsYXN0QWN0aXZhdGVkID09IFNwZWxscy5XLnNwZWxsbmFtZSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlJXIiwgZW5lbXkpKSBvciAwKQoJCQlsb2NhbCBFZG1nID0gKChFcmVhZHkgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJFIiwgZW5lbXkpKSBvciAwKQoJCQlsb2NhbCBpRG1nID0gKChJcmVhZHkgYW5kICg1MCArICgyMCAqIG15SGVyby5sZXZlbCkpKSBvciAwKQoKCQkJaWYgbXlIZXJvLmRhbWFnZSA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJNVVJERVIgSElNIgoJCQllbHNlaWYgV2RtZyA+IFFkbWcgYW5kIFFkbWcgPiBlbmVteS5oZWFsdGggdGhlbgoJCQkJS2lsbFRleHRbaV0gPSAiUSA9IGtpbGwiCgkJCWVsc2VpZiBXZG1nID4gZW5lbXkuaGVhbHRoIHRoZW4KCQkJCUtpbGxUZXh0W2ldID0gIlcgPSBraWxsIgoJCQllbHNlaWYgRWRtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJFID0ga2lsbCIKCQkJZWxzZWlmIFFkbWcgKyBpRG1nID4gZW5lbXkuaGVhbHRoIHRoZW4KCQkJCUtpbGxUZXh0W2ldID0gIlEgKyBJZ2l0ZSA9IGtpbGwiCgkJCWVsc2VpZiBXZG1nICsgaURtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJXICsgSWdpdGUgPSBraWxsIgoJCQllbHNlaWYgUWRtZyArIFFkbWdNYXJrICsgV2RtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJRICsgVyA9IGtpbGwiCgkJCWVsc2VpZiBXZG1nICsgRWRtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJRICsgRSA9IGtpbGwiCgkJCWVsc2VpZiBRZG1nICsgUlFkbWcgKyBRZG1nTWFyayA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJRICsgUiA9IGtpbGwiCgkJCWVsc2VpZiBXZG1nICsgUldkbWcgPiBlbmVteS5oZWFsdGggdGhlbgoJCQkJS2lsbFRleHRbaV0gPSAiVyArIFIgPSBraWxsIgoJCQllbHNlaWYgUWRtZyArIFJRZG1nICsgUWRtZ01hcmsgKyBpRG1nID4gZW5lbXkuaGVhbHRoIHRoZW4KCQkJCUtpbGxUZXh0W2ldID0gIlEgKyBSICsgSWduaXRlID0ga2lsbCIKCQkJZWxzZWlmIFFkbWcgKyBRZG1nTWFyayArIFdkbWcgKyBSV2RtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJRICsgVyArIFIgPSBraWxsIgoJCQllbHNlaWYgUWRtZyArIFJRZG1nICsgUWRtZ01hcmsgKyBRZG1nTWFyayArIFdkbWcgPiBlbmVteS5oZWFsdGggdGhlbgoJCQkJS2lsbFRleHRbaV0gPSAiUSArIFIgKyBXID0ga2lsbCIKCQkJZWxzZWlmIFFkbWcgKyBSUWRtZyArIFFkbWdNYXJrICsgUWRtZ01hcmsgKyBXZG1nICsgRWRtZyA+IGVuZW15LmhlYWx0aCB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJRICsgUiArIFcgKyBFID0ga2lsbCIKCQkJZWxzZWlmIFFkbWcgKyBRZG1nTWFyayArIFdkbWcgKyBSV2RtZyArIEVkbWcgPiBlbmVteS5oZWFsdGggdGhlbgoJCQkJS2lsbFRleHRbaV0gPSAiUSArIFcgKyBSICsgRSA9IGtpbGwiCgkJCWVsc2VpZiBRcmVhZHkgb3IgV3JlYWR5IG9yIEVyZWFkeSB0aGVuCgkJCQlLaWxsVGV4dFtpXSA9ICJIYXJhc3MgaGltISIKCQkJZWxzZQoJCQkJS2lsbFRleHRbaV0gPSAiU3BlbGxzIG9uIENEIgoJCQllbmQKCQllbmQKCWVuZAplbmQKCmZ1bmN0aW9uIGdldEhpdEJveFJhZGl1cyh0YXJnZXQpCiAgICByZXR1cm4gR2V0RGlzdGFuY2UodGFyZ2V0Lm1pbkJCb3gsIHRhcmdldC5tYXhCQm94KS8yCmVuZAoKCmZ1bmN0aW9uIERyYXdNZW51KCkKCglNZW51ID0gc2NyaXB0Q29uZmlnKCJSJkIgLSBMZUJsYW5jIGJ5IFgtQm94IiwgIlRvdGFsbHlMZUJsYW5jLmNmZyIpCglsb2NhbCBuYW1lID0gIlImQiAtIExlQmxhbmMgIC0gICIKCgktLSBLZXlTZXR0aW5ncwoJTWVudTphZGRTdWJNZW51KG5hbWUgLi4gIktleSBTZXR0aW5ncyIsICJrZXlzZXR0aW5ncyIpCiAJTWVudS5rZXlzZXR0aW5nczphZGRQYXJhbSgidXNlQ29tYm8iLCAiQ29tYm8gS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpCiAJTWVudS5rZXlzZXR0aW5nczphZGRQYXJhbSgidXNlSGFyYXNzIiwgIkhhcmFzcyBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkKIAlNZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJ1c2VMYW5lY2xlYXIiLCAiTGFuZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAgIHN0cmluZy5ieXRlKCJaIikpCiAJTWVudS5rZXlzZXR0aW5nczphZGRQYXJhbSgidXNlTGFzdEhpdCIsICJMYXN0SGl0IEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAgc3RyaW5nLmJ5dGUoIloiKSkKIAlNZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJ1c2VGYXJtIiwgIkZhcm0gS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkKIAlTeE9yYjpSZWdpc3RlckhvdEtleSgnZmlnaHQnLCAgICAgTWVudS5rZXlzZXR0aW5ncywgJ3VzZUNvbWJvJykKCVN4T3JiOlJlZ2lzdGVySG90S2V5KCdoYXJhc3MnLCAgICBNZW51LmtleXNldHRpbmdzLCAndXNlSGFyYXNzJykKCVN4T3JiOlJlZ2lzdGVySG90S2V5KCdsYW5lY2xlYXInLCBNZW51LmtleXNldHRpbmdzLCAndXNlTGFuZWNsZWFyJykKCVN4T3JiOlJlZ2lzdGVySG90S2V5KCdsYXN0aGl0JywgICBNZW51LmtleXNldHRpbmdzLCAndXNlTGFzdEhpdCcpCgoJLS0gQ29tYm8KCU1lbnU6YWRkU3ViTWVudShuYW1lIC4uICJDb21ibyIsICJjb21ibyIpCglNZW51LmNvbWJvOmFkZFBhcmFtKCJjb21ib1dheSIsICJQZXJmb3JtIENvbWJvOiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlNtYXJ0IiwgIlFSV0UiLCAiUVdSRSIsICJXUVJFIiwgIldSUUUifSkKCU1lbnUuY29tYm86YWRkUGFyYW0oImNvbWJvSXRlbXMiLCAiVXNlIEl0ZW1zIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJTWVudS5jb21ibzphZGRQYXJhbSgiY29tYm9BQSIsICJVc2UgQUFzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJTWVudS5jb21ibzphZGRQYXJhbSgiY29tYm9HYXAiLCAiVXNlIFcgdG8gR2FwQ2xvc2UiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgoJLS0gVyBTZXR0aW5ncwoJTWVudTphZGRTdWJNZW51KG5hbWUgLi4gIlNldHRpbmdzOiBXIiwgInNldHRpbmdzVyIpCglNZW51LnNldHRpbmdzVzphZGRQYXJhbSgidXNlT3B0aW9uYWwiLCAiVXNlIE9wdGlvbmFsIFcgU2V0dGluZ3MiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCglNZW51LnNldHRpbmdzVzphZGRQYXJhbSgidXNlT3B0aW9uYWxXIiwgIlJldHVybjogIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiU21hcnQiLCAiVGFyZ2V0IGRlYWQiLCAiU2tpbGxzIHVzZWQiLCAiQm90aCJ9KQoKCSAtLSBIYXJhc3MKCU1lbnU6YWRkU3ViTWVudShuYW1lIC4uICJIYXJhc3MiLCAiaGFyYXNzIikKIAlNZW51LmhhcmFzczphZGRQYXJhbSgiaGFyYXNzUSIsICJVc2UgIiAuLiBTcGVsbHMuUS5uYW1lIC4uICIgKFEpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQogCU1lbnUuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NXIiwgIlVzZSAiIC4uIFNwZWxscy5XLm5hbWUgLi4gIiAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQogCU1lbnUuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NFIiwgIlVzZSAiIC4uIFNwZWxscy5FLm5hbWUgLi4gIiAoRSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQogCU1lbnUuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NNYW5hIiwgIk1hbmEgTWFuYWdlciAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAwLjI1LCAwLCAxLCAyKQoKCS0tIEZhcm1pbmcKCU1lbnU6YWRkU3ViTWVudShuYW1lIC4uICJGYXJtaW5nIiwgImZhcm0iKQoJTWVudS5mYXJtOmFkZFBhcmFtKCJmYXJtUSIsICJVc2UgIiAuLiBTcGVsbHMuUS5uYW1lIC4uICIgKFEpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJTWVudS5mYXJtOmFkZFBhcmFtKCJmYXJtVyIsICJVc2UgIiAuLiBTcGVsbHMuVy5uYW1lIC4uICIgKFcpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJTWVudS5mYXJtOmFkZFBhcmFtKCJmYXJtUmFuZ2UiLCAiTWluaW9ucyBvdXRzaWRlIEFBIHJhbmdlIG9ubHkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQoJTWVudS5mYXJtOmFkZFBhcmFtKCJmYXJtQUEiLCAiRmFybSBpZiBBQSBpcyBvbiBDRCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpCgoJLS0gTGFuZUNsZWFyCglNZW51OmFkZFN1Yk1lbnUobmFtZSAuLiAiTGFuZWNsZWFyIiwgImxhbmVjbGVhciIpCglNZW51LmxhbmVjbGVhcjphZGRQYXJhbSgibGFuZWNsZWFyUSIsICJVc2UgIiAuLiBTcGVsbHMuUS5uYW1lIC4uICIgKFEpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJTWVudS5sYW5lY2xlYXI6YWRkUGFyYW0oImxhbmVjbGVhclciLCAiVXNlICIgLi4gU3BlbGxzLlcubmFtZSAuLiAiIChXKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCU1lbnUubGFuZWNsZWFyOmFkZFBhcmFtKCJsYW5lY2xlYXJSIiwgIlVzZSAiIC4uIFNwZWxscy5SLm5hbWUgLi4gIiAoUikiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQoKIAkgLS0gS2lsbHN0ZWFsCglNZW51OmFkZFN1Yk1lbnUobmFtZSAuLiAiS2lsbFN0ZWFsIiwgImtpbGxzdGVhbCIpCiAJTWVudS5raWxsc3RlYWw6YWRkUGFyYW0oImtpbGxzdGVhbCIsICJLaWxsU3RlYWwiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCiAJTWVudS5raWxsc3RlYWw6YWRkUGFyYW0oImtpbGxzdGVhbFEiLCAiVXNlICIgLi4gU3BlbGxzLlEubmFtZSAuLiAiIChRKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKIAlNZW51LmtpbGxzdGVhbDphZGRQYXJhbSgia2lsbHN0ZWFsVyIsICJVc2UgIiAuLiBTcGVsbHMuVy5uYW1lIC4uICIgKFcpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQogCU1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJraWxsc3RlYWxFIiwgIlVzZSAiIC4uIFNwZWxscy5FLm5hbWUgLi4gIiAoRSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQogCU1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJraWxsc3RlYWxSIiwgIlVzZSAiIC4uIFNwZWxscy5SLm5hbWUgLi4gIiAoUikiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQogCU1lbnUua2lsbHN0ZWFsOmFkZFN1Yk1lbnUoIktpbGxTdGVhbCBFbmVteSIsICJlbmVtaWVzIikKIAlmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvCiAJCWlmIHRhYmxlLmNvbnRhaW5zKHByaW9yaXR5VGFibGUuU3VwcG9ydCwgZW5lbXkuY2hhck5hbWUpIG9yIHRhYmxlLmNvbnRhaW5zKHByaW9yaXR5VGFibGUuQURfQ2FycnksIGVuZW15LmNoYXJOYW1lKSBvciB0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLkFQLCBlbmVteS5jaGFyTmFtZSkgdGhlbgoJCQlNZW51LmtpbGxzdGVhbC5lbmVtaWVzOmFkZFBhcmFtKGVuZW15LmNoYXJOYW1lLCBlbmVteS5jaGFyTmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJCWVsc2UKCQkJTWVudS5raWxsc3RlYWwuZW5lbWllczphZGRQYXJhbShlbmVteS5jaGFyTmFtZSwgZW5lbXkuY2hhck5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpCgkJZW5kCiAJZW5kCgogCS0tRHJhd2luZ3MKIAlNZW51OmFkZFN1Yk1lbnUobmFtZSAuLiAiRHJhd2luZ3MiLCAiZHJhd2luZ3MiKQoKIAlNZW51LmRyYXdpbmdzOmFkZFN1Yk1lbnUoIkxhZy1GcmVlIENpcmNsZXMiLCAibGZjIikKIAlNZW51LmRyYXdpbmdzLmxmYzphZGRQYXJhbSgidXNlTEZDIiwgIlVzZSBMYWctRnJlZSBDaXJjbGVzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkKIAlNZW51LmRyYXdpbmdzLmxmYzphZGRQYXJhbSgiQ0wiLCAiTGVuZ3RoIGJlZm9yZSBTbmFwcGluZyIsIFNDUklQVF9QQVJBTV9TTElDRSwgMzAwLCA3NSwgMjAwMCwgMCkKCiAJTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhdyIsICJVc2UgRHJhd2luZ3MiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCiAJTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd1EiLCAiRHJhdyAiIC4uIFNwZWxscy5RLm5hbWUgLi4gIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCiAJTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd1ciLCAiRHJhdyAiIC4uIFNwZWxscy5XLm5hbWUgLi4gIiAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCiAJTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd0UiLCAiRHJhdyAiIC4uIFNwZWxscy5FLm5hbWUgLi4gIiAoRSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCiAJTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd0tpbGxhYmxlIiwgIkRyYXcgS2lsbGFibGUgVGV4dCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKIAlNZW51LmRyYXdpbmdzOmFkZFBhcmFtKCJkcmF3S2lsbGFibGVXaWR0aCIsICJEcmF3IEtpbGxhYmxlIFdpZHRoIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgNSwgMjAsIDApCiAJTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd1NwZWxsUmVhZHkiLCAiRG9uJ3QgZHJhdyBpZiBzcGVsbCBpcyBDRCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpCgogCU1lbnU6YWRkU3ViTWVudShuYW1lIC4uICJQcmVkaWN0aW9uIiwgInByZWRpY3Rpb24iKQogCWlmIHByb2RMb2FkZWQgdGhlbgogCQlNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb24iLCAiUHJlZGljdGlvbiBUeXBlOiIsIFNDUklQVF9QQVJBTV9MSVNULCAyLCB7Ik5vcm1hbCIsICJWUHJlZGljdGlvbiIsICJQcm9kaWN0aW9uIn0pCiAJZWxzZQogCQlNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb24iLCAiUHJlZGljdGlvbiBUeXBlOiIsIFNDUklQVF9QQVJBTV9MSVNULCAyLCB7Ik5vcm1hbCIsICJWUHJlZGljdGlvbiJ9KQogCWVuZAoKIAktLU1pc2MKIAlNZW51OmFkZFN1Yk1lbnUobmFtZSAuLiAiTWlzYyIsICJtaXNjIikKCglpZiBpZ25pdGUgfj0gbmlsIHRoZW4KCQlNZW51Lm1pc2M6YWRkU3ViTWVudSgiQXV0byBJZ25pdGUiLCAiYXV0b2lnbml0ZSIpCgkJTWVudS5taXNjLmF1dG9pZ25pdGU6YWRkUGFyYW0oInVzZUlnbml0ZSIsICJVc2UgU3VtbW9uZXIgSWduaXRlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJCSAJZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbwoJCQkJTWVudS5taXNjLmF1dG9pZ25pdGU6YWRkUGFyYW0oZW5lbXkuY2hhck5hbWUsICJVc2UgSWduaXRlIE9uICIgLi4gZW5lbXkuY2hhck5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCQkgCWVuZAoJZW5kCgoJTWVudS5taXNjOmFkZFN1Yk1lbnUoIlpoeW9uYXMiLCAiemhvbnlhcyIpCiAJTWVudS5taXNjLnpob255YXM6YWRkUGFyYW0oInpob255YXMiLCAiQXV0byBaaG9ueWFzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQogCU1lbnUubWlzYy56aG9ueWFzOmFkZFBhcmFtKCJ6aG9ueWFzdW5kZXIiLCAiVXNlIFpob255YXMgdW5kZXIgJSBoZWFsdGgiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDAuMjAsIDAsIDEgLDIpCgoJLS1PcmJ3YWxrZXIKCU1lbnU6YWRkU3ViTWVudShuYW1lIC4uICJPcmJXYWxrZXIiLCAib3Jid2Fsa2VyIikKCVN4T3JiOkxvYWRUb01lbnUoTWVudS5vcmJ3YWxrZXIsIHRydWUpCgoJTWVudTphZGRTdWJNZW51KG5hbWUgLi4gIkRlYnVnIiwgImRlYnVnIikKCU1lbnUuZGVidWc6YWRkUGFyYW0oInVzZURlYnVnIiwgIkRldmVsb3BlcjogRGVidWciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQoKCU1lbnU6YWRkUGFyYW0oImluZm8yIiwgIkF1dGhvciIsIFNDUklQVF9QQVJBTV9JTkZPLCBhdXRob3IpCglNZW51OmFkZFBhcmFtKCJpbmZvIiwgIlZlcnNpb24iLCBTQ1JJUFRfUEFSQU1fSU5GTywgdmVyc2lvbikKCgkgLS0gQWx3YXlzIHNob3cKCSBNZW51LmtleXNldHRpbmdzOnBlcm1hU2hvdygidXNlQ29tYm8iKQoJIE1lbnUua2V5c2V0dGluZ3M6cGVybWFTaG93KCJ1c2VIYXJhc3MiKQoJIE1lbnUua2V5c2V0dGluZ3M6cGVybWFTaG93KCJ1c2VMYW5lY2xlYXIiKQoJIE1lbnUua2V5c2V0dGluZ3M6cGVybWFTaG93KCJ1c2VMYXN0SGl0IikKCSBNZW51LmtleXNldHRpbmdzOnBlcm1hU2hvdygidXNlRmFybSIpCgkgTWVudS5raWxsc3RlYWw6cGVybWFTaG93KCJraWxsc3RlYWwiKQoJIE1lbnUuZHJhd2luZ3M6cGVybWFTaG93KCJkcmF3IikKZW5kCgoKCmZ1bmN0aW9uIFN1bW1vbmVycygpCgloZWFsID0gKChteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzEpLm5hbWU6ZmluZCgic3VtbW9uZXJoZWFsIikgYW5kIFNVTU1PTkVSXzEpIG9yIChteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzIpLm5hbWU6ZmluZCgic3VtbW9uZXJoZWFsIikgYW5kIFNVTU1PTkVSXzIpKQogICAJaWduaXRlID0gKChteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzEpLm5hbWU6ZmluZCgic3VtbW9uZXJkb3QiKSBhbmQgU1VNTU9ORVJfMSkgb3IgKG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMikubmFtZTpmaW5kKCJzdW1tb25lcmRvdCIpIGFuZCBTVU1NT05FUl8yKSkKICAgCWJhcnJpZXIgPSAoKG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMSkubmFtZTpmaW5kKCJzdW1tb25lcmJhcnJpZXIiKSBhbmQgU1VNTU9ORVJfMSkgb3IgKG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMikubmFtZTpmaW5kKCJzdW1tb25lcmJhcnJpZXIiKSBhbmQgU1VNTU9ORVJfMikpCiAgIAlmbGFzaCA9ICgobXlIZXJvOkdldFNwZWxsRGF0YShTVU1NT05FUl8xKS5uYW1lOmZpbmQoInN1bW1vbmVyZmxhc2giKSBhbmQgU1VNTU9ORVJfMSkgb3IgKG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMikubmFtZTpmaW5kKCJzdW1tb25lcmZsYXNoIikgYW5kIFNVTU1PTkVSXzIpKQplbmQKCmZ1bmN0aW9uIFNwZWxsUmVhZHlDaGVja3MoKQoJUXJlYWR5ID0gbXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWQoJV3JlYWR5ID0gbXlIZXJvOkNhblVzZVNwZWxsKF9XKSA9PSBSRUFEWQoJRXJlYWR5ID0gbXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWQoJUnJlYWR5ID0gbXlIZXJvOkNhblVzZVNwZWxsKF9SKSA9PSBSRUFEWQoJSHJlYWR5ID0gKGhlYWwgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoaGVhbCkgPT0gUkVBRFkpCglJcmVhZHkgPSAoaWduaXRlIH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGlnbml0ZSkgPT0gUkVBRFkpCgoJLS0gTGFnIEZyZWUgQ2lyY2xlcwoJaWYgTWVudS5kcmF3aW5ncy5sZmMudXNlTEZDIHRoZW4KCQlfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTIKCWVsc2UKCQlfRy5EcmF3Q2lyY2xlID0gX0cub2xkRHJhd0NpcmNsZQoJZW5kCgplbmQKCgpmdW5jdGlvbiBSZXR1cm5CZXN0VGFyZ2V0UG9zaXRpb24obWluX3RhcmdldHMsIHJhKQoJbG9jYWwgY291bnQsIGVuZW1pZXMsIHBvcyA9IDAsIHt9LCBuaWwKCWxvY2FsIHJhbmdlID0gKHJhIGFuZCByYSAqIHJhKSBvciAobXlIZXJvLnJhbmdlICogbXlIZXJvLnJhbmdlKQoKCWZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8KCQlpZiBHZXREaXN0YW5jZVNxcihlbmVteSwgbXlIZXJvKSA8PSByYW5nZSB0aGVuCgkJCWVuZW1pZXMgPSB7fQoJCQl0YWJsZS5pbnNlcnQoZW5lbWllcywgZW5lbXkuY2hhck5hbWUpCgkJCWNvdW50ID0gMAoJCQlmb3IgaSwgVGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbwoJCQkJaWYgZW5lbXkgfj0gVGVuZW15IHRoZW4KCQkJCQlpZiBHZXREaXN0YW5jZShUZW5lbXksIGVuZW15KSA8IFNwZWxscy5XLnJhZGl1cyB0aGVuCgkJCQkJCWNvdW50ID0gY291bnQgKyAxCgkJCQkJCXRhYmxlLmluc2VydChlbmVtaWVzLCBUZW5lbXkuY2hhck5hbWUpCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgoJCQlpZiBjb3VudCA+PSBtaW5fdGFyZ2V0cyB0aGVuCgkJCQlwb3MgPSBlbmVteS5wb3MKCQkJCWJyZWFrCgkJCWVuZAoJCWVuZAoJZW5kCglyZXR1cm4gcG9zLCBlbmVtaWVzLCBjb3VudAplbmQKCi0tIFNlbGYgbWFkZSBBT0UKZnVuY3Rpb24gR2V0QmVzdEFPRVBvc2l0aW9uKG9iamVjdHMsIHJhbmdlLCByYWRpdXMsIHNvdXJjZSkKCWFzc2VydChvYmplY3RzIGFuZCB0eXBlKG9iamVjdHMpID09ICJ0YWJsZSIsICJSJkIgTGVCbGFuYzogSW52YWxpZCBPYmplY3RzIGluIGZ1bmN0aW9uIEdldEJlc3RBT0VQb3NpdGlvbiIpCglsb2NhbCBwb3MgPSBuaWwKCWxvY2FsIGNvdW50MiA9IDAKCWxvY2FsIHNvdXJjZSA9IHNvdXJjZSBvciBteUhlcm8KCWxvY2FsIHJhbmdlID0gKHJhbmdlIGFuZCByYW5nZSAqIHJhbmdlKSBvciBteUhlcm8KCglmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbwoJCWlmIEdldERpc3RhbmNlU3FyKG9iamVjdCwgc291cmNlKSA8IHJhbmdlIHRoZW4KCQkJbG9jYWwgY291bnQgPSAwCgkJCWZvciBpLCBvYiBpbiBpcGFpcnMob2JqZWN0cykgZG8KCQkJCWlmIEdldERpc3RhbmNlU3FyKG9iLCBvYmplY3QpIDw9IHJhZGl1cyAqIHJhZGl1cyB0aGVuCgkJCQkJY291bnQgPSBjb3VudCArIDEKCQkJCWVuZAoJCQllbmQKCQkJaWYgY291bnQgPiBjb3VudDIgdGhlbgoJCQkJY291bnQyID0gY291bnQKCQkJCXBvcyA9IG9iamVjdC5wb3MKCQkJZW5kCgkJZW5kCgllbmQKCglyZXR1cm4gcG9zLCBjb3VudDIKZW5kCgpmdW5jdGlvbiBHZXRLaWxsYWJsZU1pbmlvbnMobWluaW9uVGFibGUsIHJhbmdlLCBzcGVsbCwgc291cmNlKQoJYXNzZXJ0KHNwZWxsID09IF9RIG9yIHNwZWxsID09IF9XIG9yIHNwZWxsID09IF9FLCAiUiZCIExlQmxhbmM6IENvcnJlY3Qgc3BlbGwgbm90IGRldGVjdGVkIikKCWFzc2VydChtaW5pb25UYWJsZSBhbmQgdHlwZShtaW5pb25UYWJsZSkgPT0gInRhYmxlIiwgIlImQiBMZUJsYW5jOiBJbnZhbGlkIHRhYmxlIGluOiBtaW5pb25UYWJsZSwgZmlyc3QgcGFyYW1ldGVyIikKCWxvY2FsIHJhbmdlID0gcmFuZ2UgYW5kIHJhbmdlICogcmFuZ2Ugb3IgbXlIZXJvCglsb2NhbCBtaW5pb25zID0ge30KCWxvY2FsIHNvdXJjZSA9IHNvdXJjZSBvciBteUhlcm8KCWxvY2FsIGRtZyA9IDAKCWZvciBpLCBtaW5pb24gaW4gaXBhaXJzKG1pbmlvblRhYmxlKSBkbwoJCWlmIEdldERpc3RhbmNlU3FyKG1pbmlvbikgPCByYW5nZSB0aGVuCgkJCWlmIHNwZWxsID09IF9RIHRoZW4KCQkJCWRtZyA9IGdldERtZygiUSIsIG1pbmlvbiwgc291cmNlKQoJCQllbmQKCQkJaWYgc3BlbGwgPT0gX1cgdGhlbgoJCQkJZG1nID0gZ2V0RG1nKCJXIiwgbWluaW9uLCBzb3VyY2UpCgkJCWVuZAoJCQlpZiBzcGVsbCA9PSBfRSB0aGVuCgkJCQlkbWcgPSBnZXREbWcoIkUiLCBtaW5pb24sIHNvdXJjZSkKCQkJZW5kCgkJCWlmIG1pbmlvbi5oZWFsdGggPCBkbWcgdGhlbgoJCQkJdGFibGUuaW5zZXJ0KG1pbmlvbnMsIG1pbmlvbikKCQkJZW5kCgkJZW5kCgllbmQKCXJldHVybiBtaW5pb25zCmVuZAoKLS0gUmV0dXJuIG51bWJlciBvZiBBbGx5IGluIHJhbmdlCmZ1bmN0aW9uIEFsbHlIZXJvSW5SYW5nZShyYW5nZSwgb2JqZWN0KQogICAgb2JqZWN0ID0gb2JqZWN0IG9yIG15SGVybwogICAgcmFuZ2UgPSByYW5nZSBhbmQgcmFuZ2UgKiByYW5nZSBvciBteUhlcm8ucmFuZ2UgKiBteUhlcm8ucmFuZ2UKICAgIGxvY2FsIEFsbHlIZXJvSW5SYW5nZSA9IDAKICAgIGZvciBpID0gMSwgaGVyb01hbmFnZXIuaUNvdW50LCAxIGRvCiAgICAgICAgbG9jYWwgaGVybyA9IGhlcm9NYW5hZ2VyOmdldEhlcm8oaSkKICAgICAgICBpZiBoZXJvLnRlYW0gPT0gb2JqZWN0LnRlYW0gYW5kIEdldERpc3RhbmNlU3FyKG9iamVjdCwgaGVybykgPD0gcmFuZ2UgdGhlbgogICAgICAgICAgICBBbGx5SGVyb0luUmFuZ2UgPSBBbGx5SGVyb0luUmFuZ2UgKyAxCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBBbGx5SGVyb0luUmFuZ2UKZW5kCgoKZnVuY3Rpb24gR2V0V1ByZWRpY3Rpb24odGFyZ2V0KQoJaWYgTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMSB0aGVuCgkJV0Nhc3QgPSBOb3JtYWxXUHJlZDpHZXRQcmVkaWN0aW9uKHRhcmdldCkKCQlyZXR1cm4gV0Nhc3QKCS0tIFZQcmVkaWN0aW9uCgllbHNlaWYgTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMiB0aGVuCgkJV0Nhc3QgPSBWUDpHZXRDaXJjdWxhckNhc3RQb3NpdGlvbih0YXJnZXQsIFNwZWxscy5XLmRlbGF5LCBTcGVsbHMuVy5yYWRpdXMsIFNwZWxscy5XLnJhbmdlLCBTcGVsbHMuVy5zcGVlZCkKCQlyZXR1cm4gV0Nhc3QKCS0tIFByb2RpY3Rpb24KCWVsc2VpZiBwcm9kTG9hZGVkIGFuZCBNZW51LnByZWRpY3Rpb24udXNlUHJlZGljdGlvbiA9PSAzIHRoZW4KCQlXQ2FzdCA9IFByb2RXOkdldFByZWRpY3Rpb24odGFyZ2V0KQoJCXJldHVybiBXQ2FzdAoJZW5kCmVuZAoKZnVuY3Rpb24gR2V0RVByZWRpY3Rpb24odGFyZ2V0KQoJLS0gTm9ybWFsIFByZWRpY3Rpb24KCWlmIE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uID09IDEgdGhlbgoJCWxvY2FsIGNhc3RQb3NFLCBjb2xsRSwgaGVhbHRoRSA9IE5vcm1hbEVQcmVkOkdldFByZWRpY3Rpb24odGFyZ2V0KQoJCWlmIG5vdCBjb2xsRSB0aGVuCgkJCUVDYXN0ID0gY2FzdFBvc0UKCQllbmQKCQlyZXR1cm4gRUNhc3QKCS0tIFZQcmVkaWN0aW9uCgllbHNlaWYgTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMiB0aGVuCgkJbG9jYWwgRUNhc3QsIGhpdGNoYW5jZSA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odGFyZ2V0LCBTcGVsbHMuRS5kZWxheSwgU3BlbGxzLkUucmFkaXVzLCBTcGVsbHMuRS5yYW5nZSwgU3BlbGxzLkUuc3BlZWQsIG15SGVybywgdHJ1ZSkKCQlpZiBoaXRjaGFuY2UgPj0gMiB0aGVuCgkJCXJldHVybiBFQ2FzdAoJCWVuZAoJLS0gUHJvZGljdGlvbgoJZWxzZWlmIHByb2RMb2FkZWQgYW5kIE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uID09IDMgdGhlbgoJCWxvY2FsIEVDYXN0LCBpbmZvID0gUHJvZEU6R2V0UHJlZGljdGlvbih0YXJnZXQpCgkJaWYgbm90IGluZm8ubUNvbGxpc2lvbigpIHRoZW4KCQkJcmV0dXJuIEVDYXN0CgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiBQZXJmb3JtQ29tYm8oY29tYm9UYWJsZSwgdGFyZ2V0KQoJaWYgbm90IGNvbWJvVGFibGUgYW5kIG5vdCB0eXBlKGNvbWJvVGFibGUpID09ICJ0YWJsZSIgdGhlbiByZXR1cm4gZW5kCgoJZm9yIGksIHNwZWxsIGluIGlwYWlycyhjb21ib1RhYmxlKSBkbwoJCWlmIHNwZWxsID09IF9RIHRoZW4KCQkJQ2FzdFEodGFyZ2V0LCBmYWxzZSkKCQllbHNlaWYgc3BlbGwgPT0gX1cgdGhlbgoJCQlDYXN0Vyh0YXJnZXQsIGZhbHNlKQoJCWVsc2VpZiBzcGVsbCA9PSBfRSB0aGVuCgkJCUNhc3RFKHRhcmdldCwgZmFsc2UpCgkJZWxzZWlmIHNwZWxsID09IF9SIHRoZW4KCQkJQ2FzdFIodGFyZ2V0KQoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gQ2FzdFEodGFyZ2V0LCBjYXN0ZWRCeVIpCglsb2NhbCBjYXN0ZWRCeVIgPSAoKGNhc3RlZEJ5UiBhbmQgY2FzdGVkQnlSID09IHRydWUgYW5kIFJyZWFkeSkgb3IgbmlsKQoJaWYgdGFyZ2V0IH49IG5pbCBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IFNwZWxscy5RLnJhbmdlICogU3BlbGxzLlEucmFuZ2UgYW5kIHRhcmdldC50eXBlID09IG15SGVyby50eXBlIG9yIHRhcmdldC50eXBlID09ICJvYmpfQUlfTWluaW9uIiB0aGVuCgkJaWYgY2FzdGVkQnlSIHRoZW4KCQkJQ2FzdFNwZWxsKF9SLCB0YXJnZXQpCgkJCXJldHVybiB0cnVlCgkJZWxzZQoJCQlpZiBRcmVhZHkgdGhlbgoJCQkJQ2FzdFNwZWxsKF9RLCB0YXJnZXQpCgkJCQlyZXR1cm4gdHJ1ZQoJCQllbmQKCQllbmQKCWVuZAplbmQKCmZ1bmN0aW9uIENhc3RXKHRhcmdldCwgY2FzdGVkQnlSKQoJbG9jYWwgV1JhbmdlUmFkaXVzID0gU3BlbGxzLlcucmFuZ2UgKyAxMDAKCWxvY2FsIFdSYW5nZVJhZGl1c1NxciA9IFdSYW5nZVJhZGl1cyAqIFdSYW5nZVJhZGl1cwoJbG9jYWwgY2FzdGVkQnlSID0gKGNhc3RlZEJ5UiBhbmQgY2FzdGVkQnlSID09IHRydWUgYW5kIFJyZWFkeSBhbmQgbm90IHdyVXNlZCgpKSBvciBuaWwKCWlmIG5vdCB0YXJnZXQuZGVhZCBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBXUmFuZ2VSYWRpdXNTcXIgdGhlbgoJCWlmIHRhcmdldC50eXBlID09IG15SGVyby50eXBlIHRoZW4KCQkJaWYgY2FzdGVkQnlSIHRoZW4KCQkJCWxvY2FsIGNhc3RQb3NpdGlvbiwgaGl0Q2hhbmNlID0gR2V0V1ByZWRpY3Rpb24odGFyZ2V0KQoJCQkJaWYgY2FzdFBvc2l0aW9uIH49IG5pbCB0aGVuCgkJCQkJQ2FzdFNwZWxsKF9SLCBjYXN0UG9zaXRpb24ueCwgY2FzdFBvc2l0aW9uLnopCgkJCQkJcmV0dXJuIHRydWUKCQkJCWVuZAoJCQllbHNlCgkJCQkgaWYgV3JlYWR5IGFuZCBub3Qgd1VzZWQoKSB0aGVuCgkJCQkJbG9jYWwgY2FzdFBvc2l0aW9uLCBoaXRDaGFuY2UgPSBHZXRXUHJlZGljdGlvbih0YXJnZXQpCgkJCQkJaWYgY2FzdFBvc2l0aW9uIH49IG5pbCB0aGVuCgkJCQkJCUNhc3RTcGVsbChfVywgY2FzdFBvc2l0aW9uLngsIGNhc3RQb3NpdGlvbi56KQoJCQkJCQlyZXR1cm4gdHJ1ZQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVsc2VpZiB0YXJnZXQudHlwZSA9PSAib2JqX0FJX01pbmlvbiIgdGhlbgoJCQlpZiBjYXN0ZWRCeVIgdGhlbgoJCQkJQ2FzdFNwZWxsKF9SLCB0YXJnZXQucG9zLngsIHRhcmdldC5wb3MueikKCQkJCXJldHVybiB0cnVlCgkJCWVsc2UKCQkJCUNhc3RTcGVsbChfVywgdGFyZ2V0LnBvcy54LCB0YXJnZXQucG9zLnopCgkJCQlyZXR1cm4gdHJ1ZQoJCQllbmQKCQllbmQKCWVuZAoJcmV0dXJuIGZhbHNlCmVuZAoKZnVuY3Rpb24gR2FwQ2xvc2Uoc3BlbGwsIHJhbmdlLCB0YXJnZXQpCglsb2NhbCByYW5nZSA9IHJhbmdlIGFuZCByYW5nZSAgb3IgbXlIZXJvLnJhbmdlCgoJaWYgc3BlbGwgPT0gX1cgdGhlbgoJCWxvY2FsIG5ld1BvcyA9IFZlY3RvcihteUhlcm8udmlzaW9uUG9zKSArIChWZWN0b3IodGFyZ2V0KSAtIG15SGVyby52aXNpb25Qb3MpOm5vcm1hbGl6ZWQoKSAqIHJhbmdlCgoJCWlmIG5vdCBpc1dhbGwoRDNEWFZFQ1RPUjMobmV3UG9zLngsIG5ld1Bvcy55LCBuZXdQb3MueikpIGFuZCBub3QgVW5kZXJUdXJyZXQobmV3UG9zLCB0cnVlKSB0aGVuCgkJCUNhc3RTcGVsbChfVywgbmV3UG9zLngsIG5ld1Bvcy56KQoJCQlyZXR1cm4gdHJ1ZQoJCWVuZAoJZW5kCgoJcmV0dXJuIGZhbHNlCgplbmQKCmZ1bmN0aW9uIENhc3RFKHRhcmdldCwgY2FzdGVkQnlSKQoJbG9jYWwgY2FzdGVkQnlSID0gKGNhc3RlZEJ5UiBhbmQgY2FzdGVkQnlSID09IHRydWUgYW5kIFJyZWFkeSkgb3IgbmlsCglpZiBub3QgdGFyZ2V0LmRlYWQgYW5kIEdldERpc3RhbmNlU3FyKHRhcmdldCkgPD0gU3BlbGxzLkUucmFuZ2UgKiBTcGVsbHMuRS5yYW5nZSBhbmQgdGFyZ2V0LnR5cGUgPT0gbXlIZXJvLnR5cGUgb3IgdGFyZ2V0LnR5cGUgPT0gIm9ial9BSV9NaW5pb24iIHRoZW4KCQlpZiBjYXN0ZWRCeVIgdGhlbgoJCQlsb2NhbCBjYXN0UG9zaXRpb24gPSBHZXRFUHJlZGljdGlvbih0YXJnZXQpCgkJCWlmIGNhc3RQb3NpdGlvbiB+PSBuaWwgdGhlbgoJCQkJQ2FzdFNwZWxsKF9SLCBjYXN0UG9zaXRpb24ueCwgY2FzdFBvc2l0aW9uLnopCgkJCQlyZXR1cm4gdHJ1ZQoJCQllbmQKCQllbHNlCgkJCWlmIEVyZWFkeSB0aGVuCgkJCQlsb2NhbCBjYXN0UG9zaXRpb24gPSBHZXRFUHJlZGljdGlvbih0YXJnZXQpCgkJCQlpZiBjYXN0UG9zaXRpb24gfj0gbmlsIHRoZW4KCQkJCQlDYXN0U3BlbGwoX0UsIGNhc3RQb3NpdGlvbi54LCBjYXN0UG9zaXRpb24ueikKCQkJCQlyZXR1cm4gdHJ1ZQoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJCXJldHVybiBmYWxzZQoJZW5kCglyZXR1cm4gZmFsc2UKZW5kCgpmdW5jdGlvbiBDYXN0Uih0YXJnZXQsIGNhc3RPbmx5KQoKCWlmIGNhc3RPbmx5IHRoZW4KCQlpZiBjYXN0T25seSA9PSBfUSBhbmQgbm90IHRhcmdldC5kZWFkIHRoZW4KCQkJaWYgbGFzdEFjdGl2YXRlZCA9PSBTcGVsbHMuUS5zcGVsbG5hbWUgdGhlbgoJCQkJaWYgQ2FzdFEodGFyZ2V0LCB0cnVlKSB0aGVuIHJldHVybiB0cnVlIGVuZAoJCQllbmQKCQllbHNlaWYgY2FzdE9ubHkgPT0gX1cgYW5kIG5vdCB0YXJnZXQuZGVhZCB0aGVuCgkJCWlmIGxhc3RBY3RpdmF0ZWQgPT0gU3BlbGxzLlEuc3BlbGxuYW1lIHRoZW4KCQkJCWlmIENhc3RXKHRhcmdldCwgdHJ1ZSkgdGhlbiByZXR1cm4gdHJ1ZSBlbmQKCQkJZW5kCgkJZW5kCgkJcmV0dXJuIGZhbHNlCgllbHNlCgkJaWYgbm90IHRhcmdldC5kZWFkIHRoZW4KCQkJaWYgbGFzdEFjdGl2YXRlZCA9PSBTcGVsbHMuUS5zcGVsbG5hbWUgdGhlbgoJCQkJaWYgQ2FzdFEodGFyZ2V0LCB0cnVlKSB0aGVuIHJldHVybiB0cnVlIGVuZAoJCQllbHNlaWYgbGFzdEFjdGl2YXRlZCA9PSBTcGVsbHMuVy5zcGVsbG5hbWUgdGhlbgoJCQkJaWYgQ2FzdFcodGFyZ2V0LCB0cnVlKSB0aGVuIHJldHVybiB0cnVlIGVuZAoJCQllbmQKCQllbmQKCWVuZAoJcmV0dXJuIGZhbHNlCmVuZAoKZnVuY3Rpb24gd1VzZWQoKQoJaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubmFtZSA9PSAibGVibGFuY3NsaWRlcmV0dXJuIiB0aGVuCgkJCQkJaWYgTWVudS5kZWJ1Zy51c2VEZWJ1ZyBhbmQgbGFzdFdEZWJ1ZyArIDEgPCBvcy5jbG9jaygpIHRoZW4KCQkJCQkJU2F5KCJTZWVtcyBsaWtlIFcgaGFzIGJlZW4gVVNFRCIpCgkJCQkJCWxhc3RXRGVidWcgPSBvcy5jbG9jaygpCgkJCQkJZW5kCgkJcmV0dXJuIHRydWUKCWVuZAoJcmV0dXJuIGZhbHNlCmVuZApmdW5jdGlvbiB3clVzZWQoKQoJaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZSA9PSAibGVibGFuY3NsaWRlcmV0dXJubSIgdGhlbgoJCQkJaWYgTWVudS5kZWJ1Zy51c2VEZWJ1ZyBhbmQgbGFzdFdSRGVidWcgKyAxIDwgb3MuY2xvY2soKSB0aGVuCgkJCQkJU2F5KCJTZWVtcyBsaWtlIFdSIGhhcyBiZWVuIFVTRUQiKQoJCQkJCWxhc3RXUkRlYnVnID0gb3MuY2xvY2soKQoJCQkJZW5kCgkJcmV0dXJuIHRydWUKCWVuZAoJcmV0dXJuIGZhbHNlCmVuZAoKCi0tLSBTbWFydCBDb21ibwpmdW5jdGlvbiBTbWFydENvbWJvKHRhcmcpCgktLSBEYW1hZ2UgdG8gY2FsY3VsYXRlIGJlc3QgY29tYm8KCWxvY2FsIFFkbWcgPSBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUSIsIHRhcmcpCglsb2NhbCBRTWFya1Byb2NEYW1hZ2UgPSBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUVByb2MiLCB0YXJnKQoJbG9jYWwgV2RtZyA9IFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJXIiwgdGFyZykKCWxvY2FsIEVkbWcgPSBTcGVsbERtZ0NhbGN1bGF0aW9ucygiRSIsIHRhcmcpCglsb2NhbCBSUWRtZyA9IFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJSUSIsIHRhcmcpCglsb2NhbCBSV2RtZyA9IFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJSVyIsIHRhcmcpCglsb2NhbCBjb21ibyA9IHt9Cglsb2NhbCBkaXN0YW5jZVRvID0gR2V0RGlzdGFuY2VTcXIodGFyZykKCgktLSBQb3NzaWJsZSBXIHRhcmdldHMKCWxvY2FsIHBvcywgZW5lbWllcywgY291bnQgPSBSZXR1cm5CZXN0VGFyZ2V0UG9zaXRpb24oMywgU3BlbGxzLlcucmFuZ2UpCgoKCWlmIHBvcyB+PSBuaWwgYW5kIGVuZW1pZXMgfj0gbmlsIGFuZCBHZXREaXN0YW5jZVNxcihwb3MpIDwgU3BlbGxzLlcucmFuZ2UgKiBTcGVsbHMuVy5yYW5nZSB0aGVuCgkJaWYgdXNlVyBhbmQgdXNlUiBhbmQgbm90IHdVc2VkKCkgYW5kIG5vdCB3clVzZWQoKSB0aGVuCgkJCWxvY2FsIGNvdW50MiA9IDAKCQkJLS0gTG9vcGluZyB0aHJvdWdoIEFQIHRhYmxlIHRvIGZpbmQgbWF0Y2gKCQkJZm9yIGksIG5hbWUgaW4gaXBhaXJzKHByaW9yaXR5VGFibGUuQVApIGRvCgkJCQlpZiB0YWJsZS5jb250YWlucyhlbmVtaWVzLCBuYW1lKSB0aGVuCgkJCQkJY291bnQyID0gY291bnQyICsgMQoJCQkJZW5kCgkJCWVuZAoJCQktLSBMb29waW5nIHRocm91Z2ggQUQgdGFibGUgdG8gZmluZCBhIG1hdGNoCgkJCWZvciBpLCBuYW1lIGluIGlwYWlycyhwcmlvcml0eVRhYmxlLkFEX0NhcnJ5KSBkbwoJCQkJaWYgdGFibGUuY29udGFpbnMoZW5lbWllcywgbmFtZSkgdGhlbgoJCQkJCWNvdW50MiA9IGNvdW50MiArIDEKCQkJCWVuZAoJCQllbmQKCQkJCQktLSBEZWJ1ZyBzZXR0aW5ncwoJCQkJCWlmIE1lbnUuZGVidWcudXNlRGVidWcgdGhlbgoJCQkJCQlTYXkoIkZvdW5kICIgLi4gY291bnQgLi4gIiBwZXJmZWN0IFcgdGFyZ2V0cyIpCgkJCQkJZW5kCgoJCQlpZiBjb3VudDIgPj0gMyB0aGVuCgkJCQlDYXN0U3BlbGwoX1csIHBvcy54LCBwb3MueikKCQkJCUNhc3RTcGVsbChfUiwgcG9zLngsIHBvcy56KQoJCQkJCWlmIE1lbnUuZGVidWcudXNlRGVidWcgdGhlbgoJCQkJCQlTYXkoIlBlcmZvcm1pbmcgZG91YmxlIFcgb24gbWlkIGxhbmVycy9hZCBjYXJyaWVzIGZvciBwZXJmZWN0IFRFQU1GSUdIVCIpCgkJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCgkJCQlpZiBNZW51LmRlYnVnLnVzZURlYnVnIHRoZW4KCQkJCQlTYXkoIkRhbWFnZSAxOiAiIC4uIChRZG1nICsgUlFkbWcgKyBRTWFya1Byb2NEYW1hZ2UgKyBRTWFya1Byb2NEYW1hZ2UgKyBXZG1nKSkKCQkJCQlTYXkoIkRhbWFnZSAyOiAiIC4uIChXZG1nICsgUldkbWcgKyBRZG1nKSkKCQkJCWVuZAoJLS0gQWN0dWFsIGNvbWJvCglpZiBRcmVhZHkgYW5kIChXcmVhZHkgYW5kIG5vdCB3VXNlZCgpKSBhbmQgUnJlYWR5IGFuZCAoUWRtZyArIFJRZG1nICsgUU1hcmtQcm9jRGFtYWdlICsgUU1hcmtQcm9jRGFtYWdlICsgV2RtZykgPj0gKFdkbWcgKyBSV2RtZyArIFFkbWcpIGFuZCBkaXN0YW5jZVRvIDwgU3BlbGxzLlEucmFuZ2UgKiBTcGVsbHMuUS5yYW5nZSB0aGVuCgkJCQlpZiBNZW51LmRlYnVnLnVzZURlYnVnIHRoZW4KCQkJCQlTYXkoIkVudGVyZWQgRklSU1QgZW50cnkgb2Ygc21hcnQgY29tYm8iKQoJCQkJZW5kCgkJY29tYm8gPSB7X1EsIF9SLCBfVywgX0V9CgkJcmV0dXJuIGNvbWJvCgllbHNlaWYgUXJlYWR5IGFuZCBScmVhZHkgYW5kIFdyZWFkeSBhbmQgZGlzdGFuY2VUbyA8IFNwZWxscy5RLnJhbmdlICogU3BlbGxzLlEucmFuZ2UgdGhlbgoJCQkJaWYgTWVudS5kZWJ1Zy51c2VEZWJ1ZyB0aGVuCgkJCQkJU2F5KCJFbnRlcmVkIFNFQ09ORCBlbnRyeSBvZiBzbWFydCBjb21ibyIpCgkJCQllbmQKCQljb21ibyA9IHtfUSwgX1csIF9SLCBfRX0KCQlyZXR1cm4gY29tYm8KCWVsc2VpZiBkaXN0YW5jZVRvIDwgU3BlbGxzLkUucmFuZ2UgKiBTcGVsbHMuRS5yYW5nZSBhbmQgZGlzdGFuY2VUbyA+IFNwZWxscy5RLnJhbmdlICogU3BlbGxzLlEucmFuZ2UgdGhlbgoJCQlpZiBNZW51LmRlYnVnLnVzZURlYnVnIHRoZW4KCQkJCVNheSgiRW50ZXJlZCBUSElSRCBlbnRyeSBvZiBzbWFydCBjb21ibyIpCgkJCWVuZAoKCQljb21ibyA9IHtfRSwgX1csIF9RLCBfUn0KCgkJcmV0dXJuIGNvbWJvCgoJZWxzZWlmIE1lbnUuY29tYm8uY29tYm9HYXAgYW5kIGRpc3RhbmNlVG8gPiBTcGVsbHMuRS5yYW5nZSAqIFNwZWxscy5FLnJhbmdlIGFuZCBHZXREaXN0YW5jZSh0YXJnKSA8IChTcGVsbHMuUS5yYW5nZSArIFNwZWxscy5XLnJhbmdlKSB0aGVuCgoJCWlmIG5vdCB3VXNlZCgpIHRoZW4KCQkJaWYgR2FwQ2xvc2UoX1csIFNwZWxscy5XLnJhbmdlLCB0YXJnKSB0aGVuCgkJCQljb21ibyA9IHtfRSwgX1EsIF9SfQoJCQkJCQlpZiBNZW51LmRlYnVnLnVzZURlYnVnIHRoZW4KCQkJCQkJCVNheSgiRW50ZXJlZCBGT1VSVEggZW50cnkgb2Ygc21hcnQgY29tYm8iKQoJCQkJCQllbmQKCQkJZWxzZQoJCQkJY29tYm8gPSB7X1EsIF9SLCBfVywgX0V9CgkJCWVuZAoJCQlyZXR1cm4gY29tYm8KCQllbmQKCWVsc2UKCQljb21ibyA9IHtfUSwgX1IsIF9XLCBfRX0KCQkJCQlpZiBNZW51LmRlYnVnLnVzZURlYnVnIHRoZW4KCQkJCQkJU2F5KCJFbnRlcmVkIEZJRlRIIGVudHJ5IG9mIHNtYXJ0IGNvbWJvIikKCQkJCQllbmQKCQlyZXR1cm4gY29tYm8KCWVuZAplbmQKCgpmdW5jdGlvbiBTcGVsbERtZ0NhbGN1bGF0aW9ucyhwYXJhbWV0ZXIsIHRhcmdldCkKCWxvY2FsIGRtZyA9IDAKCglpZiBwYXJhbWV0ZXIgPT0gIlEiIHRoZW4KCQlkbWcgPSAyNSAqIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsICsgMzAgKyAwLjQgKiBteUhlcm8uYXAKCWVsc2VpZiBwYXJhbWV0ZXIgPT0gIlciIHRoZW4KCQlkbWcgPSA0MCAqIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsICsgNDUgKyAwLjYgKiBteUhlcm8uYXAKCWVsc2VpZiBwYXJhbWV0ZXIgPT0gIkUiIHRoZW4KCQlkbWcgPSAyNSAqIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsICsgMTUgKyAwLjUgKiBteUhlcm8uYXAKCWVsc2VpZiBwYXJhbWV0ZXIgPT0gIlJRIiB0aGVuCgkJZG1nID0gMTAwICogbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKyAwLjY1ICogbXlIZXJvLmFwCgllbHNlaWYgcGFyYW1ldGVyID09ICJSVyIgdGhlbgoJCWRtZyA9IDE1MCAqIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICsgMC45NzUgKiBteUhlcm8uYXAKCWVsc2VpZiBwYXJhbWV0ZXIgPT0gIlJFIiB0aGVuCgkJZG1nID0gMTAwICogbXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgKyAwLjY1ICogbXlIZXJvLmFwCgllbHNlaWYgcGFyYW1ldGVyID09ICJRUHJvYyIgdGhlbgoJCWRtZyA9IDI1ICogbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKyAzMCArIDAuNCAqIG15SGVyby5hcAoJZW5kCgoJcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBkbWcpCmVuZAoKZnVuY3Rpb24gRHJhd0NpcmNsZU5leHRMdmwoeCwgeSwgeiwgcmFkaXVzLCB3aWR0aCwgY29sb3IsIGNob3JkbGVuZ3RoKQoJcmFkaXVzID0gcmFkaXVzIG9yIDMwMAoJcXVhbGl0eSA9IG1hdGgubWF4KDgsIHJvdW5kKDE4MCAvIG1hdGguZGVnKChtYXRoLmFzaW4oKGNob3JkbGVuZ3RoIC8gKDIgKiByYWRpdXMpKSkpKSkpCglxdWFsaXR5ID0gMiAqIG1hdGgucGkgLyBxdWFsaXR5CglyYWRpdXMgPSByYWRpdXMgKiAuOTIKCWxvY2FsIHBvaW50cyA9IHt9Cglmb3IgdGhldGEgPSAwLCAyICogbWF0aC5waSArIHF1YWxpdHksIHF1YWxpdHkgZG8KCQlsb2NhbCBjID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh4ICsgcmFkaXVzICogbWF0aC5jb3ModGhldGEpLCB5LCB6IC0gcmFkaXVzICogbWF0aC5zaW4odGhldGEpKSkKCQkJcG9pbnRzWyNwb2ludHMgKyAxXSA9IEQzRFhWRUNUT1IyKGMueCwgYy55KQoJCWVuZAoJCURyYXdMaW5lczIocG9pbnRzLCB3aWR0aCBvciAxLCA0Mjk0OTY3Mjk1KQoJZW5kCgpmdW5jdGlvbiByb3VuZChudW0pCglpZiBudW0gPj0gMCB0aGVuIHJldHVybiBtYXRoLmZsb29yKG51bSsuNSkgZWxzZSByZXR1cm4gbWF0aC5jZWlsKG51bS0uNSkgZW5kCmVuZAoKZnVuY3Rpb24gRHJhd0NpcmNsZTIoeCwgeSwgeiwgcmFkaXVzLCBjb2xvcikKCWxvY2FsIHZQb3MxID0gVmVjdG9yKHgsIHksIHopCglsb2NhbCB2UG9zMiA9IFZlY3RvcihjYW1lcmFQb3MueCwgY2FtZXJhUG9zLnksIGNhbWVyYVBvcy56KQoJbG9jYWwgdFBvcyA9IHZQb3MxIC0gKHZQb3MxIC0gdlBvczIpOm5vcm1hbGl6ZWQoKSAqIHJhZGl1cwoJbG9jYWwgc1BvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModFBvcy54LCB0UG9zLnksIHRQb3MueikpCgoJaWYgT25TY3JlZW4oeyB4ID0gc1Bvcy54LCB5ID0gc1Bvcy55IH0sIHsgeCA9IHNQb3MueCwgeSA9IHNQb3MueSB9KSB0aGVuCgkJRHJhd0NpcmNsZU5leHRMdmwoeCwgeSwgeiwgcmFkaXVzLCAxLCBjb2xvciwgTWVudS5kcmF3aW5ncy5sZmMuQ0wpCgllbmQKZW5kCg=="),nil,b,_ENV)()
assert(load(Base64Decode("G0x1YVIAAQQEBAgAGZMNChoKAAAAAAAAAAAAAQIKAAAABgBAAEFAAAAdQAABBkBAAGUAAAAKQACBBkBAAGVAAAAKQICBHwCAAAQAAAAEBgAAAGNsYXNzAAQNAAAAU2NyaXB0U3RhdHVzAAQHAAAAX19pbml0AAQLAAAAU2VuZFVwZGF0ZQACAAAAAgAAAAgAAAACAAotAAAAhkBAAMaAQAAGwUAABwFBAkFBAQAdgQABRsFAAEcBwQKBgQEAXYEAAYbBQACHAUEDwcEBAJ2BAAHGwUAAxwHBAwECAgDdgQABBsJAAAcCQQRBQgIAHYIAARYBAgLdAAABnYAAAAqAAIAKQACFhgBDAMHAAgCdgAABCoCAhQqAw4aGAEQAx8BCAMfAwwHdAIAAnYAAAAqAgIeMQEQAAYEEAJ1AgAGGwEQA5QAAAJ1AAAEfAIAAFAAAAAQFAAAAaHdpZAAEDQAAAEJhc2U2NEVuY29kZQAECQAAAHRvc3RyaW5nAAQDAAAAb3MABAcAAABnZXRlbnYABBUAAABQUk9DRVNTT1JfSURFTlRJRklFUgAECQAAAFVTRVJOQU1FAAQNAAAAQ09NUFVURVJOQU1FAAQQAAAAUFJPQ0VTU09SX0xFVkVMAAQTAAAAUFJPQ0VTU09SX1JFVklTSU9OAAQEAAAAS2V5AAQHAAAAc29ja2V0AAQIAAAAcmVxdWlyZQAECgAAAGdhbWVTdGF0ZQAABAQAAAB0Y3AABAcAAABhc3NlcnQABAsAAABTZW5kVXBkYXRlAAMAAAAAAADwPwQUAAAAQWRkQnVnc3BsYXRDYWxsYmFjawABAAAACAAAAAgAAAAAAAMFAAAABQAAAAwAQACBQAAAHUCAAR8AgAACAAAABAsAAABTZW5kVXBkYXRlAAMAAAAAAAAAQAAAAAABAAAAAQAQAAAAQG9iZnVzY2F0ZWQubHVhAAUAAAAIAAAACAAAAAgAAAAIAAAACAAAAAAAAAABAAAABQAAAHNlbGYAAQAAAAAAEAAAAEBvYmZ1c2NhdGVkLmx1YQAtAAAAAwAAAAMAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAAAAUAAAAFAAAABgAAAAYAAAAGAAAABgAAAAUAAAADAAAAAwAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAHAAAABwAAAAcAAAAHAAAABwAAAAcAAAAHAAAABwAAAAcAAAAIAAAACAAAAAgAAAAIAAAAAgAAAAUAAABzZWxmAAAAAAAtAAAAAgAAAGEAAAAAAC0AAAABAAAABQAAAF9FTlYACQAAAA4AAAACAA0XAAAAhwBAAIxAQAEBgQAAQcEAAJ1AAAKHAEAAjABBAQFBAQBHgUEAgcEBAMcBQgABwgEAQAKAAIHCAQDGQkIAx4LCBQHDAgAWAQMCnUCAAYcAQACMAEMBnUAAAR8AgAANAAAABAQAAAB0Y3AABAgAAABjb25uZWN0AAQRAAAAc2NyaXB0c3RhdHVzLm5ldAADAAAAAAAAVEAEBQAAAHNlbmQABAsAAABHRVQgL3N5bmMtAAQEAAAAS2V5AAQCAAAALQAEBQAAAGh3aWQABAcAAABteUhlcm8ABAkAAABjaGFyTmFtZQAEJgAAACBIVFRQLzEuMA0KSG9zdDogc2NyaXB0c3RhdHVzLm5ldA0KDQoABAYAAABjbG9zZQAAAAAAAQAAAAAAEAAAAEBvYmZ1c2NhdGVkLmx1YQAXAAAACgAAAAoAAAAKAAAACgAAAAoAAAALAAAACwAAAAsAAAALAAAADAAAAAwAAAANAAAADQAAAA0AAAAOAAAADgAAAA4AAAAOAAAACwAAAA4AAAAOAAAADgAAAA4AAAACAAAABQAAAHNlbGYAAAAAABcAAAACAAAAYQAAAAAAFwAAAAEAAAAFAAAAX0VOVgABAAAAAQAQAAAAQG9iZnVzY2F0ZWQubHVhAAoAAAABAAAAAQAAAAEAAAACAAAACAAAAAIAAAAJAAAADgAAAAkAAAAOAAAAAAAAAAEAAAAFAAAAX0VOVgA="), nil, "bt", _ENV))() ScriptStatus("XKNLLQLPRMN")
